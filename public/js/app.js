(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/EPE":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".v-card--material__header.v-card {\n  border-radius: 4px;\n}",""])},0:function(t,e,a){a("bUC5"),t.exports=a("pyCd")},"4v43":function(t,e,a){"use strict";var i=a("eGYZ");a.n(i).a},"6kIf":function(t,e,a){var i=a("uFlD");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},"9Wh1":function(t,e,a){window._=a("LvDl"),window.Popper=a("8L3F").default;try{window.$=window.jQuery=a("EVdn"),a("SYky")}catch(t){}window.axios=a("vDqi"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var i=document.head.querySelector('meta[name="csrf-token"]');i?(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=i.content,window.csrf_token=i.content):console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token");var s=document.head.querySelector('meta[name="user"]');s?window.laravel_user=JSON.parse(s.content):console.error("User not found at html meta"),document.head.querySelector('meta[name="impersonating"]')&&(window.laravel_user_impersonating=!0);var n=document.head.querySelector('meta[name="git"]');window.git=null,n&&n.content&&(window.git=JSON.parse(n.content))},CX7E:function(t,e,a){"use strict";var i=a("k7iC");a.n(i).a},Cxj3:function(t,e,a){"use strict";var i=a("O3tG");a.n(i).a},Jm0l:function(t,e,a){"use strict";var i=a("6kIf");a.n(i).a},KfxI:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.active[data-v-0b9761c4] {\n  border-right: 5px solid var(--v-primary-base);\n}\n",""])},O3tG:function(t,e,a){var i=a("iwmN");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},SA6t:function(t,e,a){"use strict";var i=a("anVr");a.n(i).a},anVr:function(t,e,a){var i=a("/EPE");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},bUC5:function(t,e,a){"use strict";a.r(e);var i={el:"#app",data:function(){return{title:"Lo pantano és de La Sénia",drawer:"true"===window.localStorage.getItem("DRAWER_STATE_KEY"),drawerRight:"true"===window.localStorage.getItem("DRAWER_RIGHT_STATE_KEY"),dark:"true"===window.localStorage.getItem("DARK_THEME_KEY"),itemsMenu:[{icon:"contacts",text:"Welcome",url:"/"},{icon:"history",text:"About",url:"/about"},{icon:"history",text:"Contact",url:"/contact"},{icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"Tasques",model:!0,children:[{icon:"build",text:"Tasques amb PHP",url:"/tasks"},{icon:"build",text:"Tasques amb tailwind",url:"/tasks_vue"},{icon:"build",text:"Tasques",url:"/tasques"},{icon:"build",text:"User Tasques",url:"/user/tasks"}]},{icon:"history",text:"Tags",url:"/tags"},{icon:"track_changes",text:"Changelog",url:"/changelog"},{icon:"notifications",text:"Notifications",url:"/notifications"}],loginForm:!1,registerForm:!1}},props:{source:String},watch:{dark:function(t){window.localStorage.setItem("DARK_THEME_KEY",t)},drawer:function(t){window.localStorage.setItem("DRAWER_STATE_KEY",t)},drawerRight:function(t){window.localStorage.setItem("DRAWER_RIGHT_STATE_KEY",t)}},created:function(){window.localStorage.getItem("PRIMARY_COLOR_KEY")&&(this.$vuetify.theme.primary=window.localStorage.getItem("PRIMARY_COLOR_KEY"))}},s=a("KHd+"),n=Object(s.a)(i,void 0,void 0,!1,null,null,null).exports,r=a("XuX8"),o=a.n(r),l=a("zlta"),c=a.n(l),d=(a("v0CA"),a("0eeA"),a("tb+u"),a("1LhQ"),a("9Wh1"),{mounted:function(){console.log("Component mounted.")}}),u=Object(s.a)(d,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"card card-default"},[e("div",{staticClass:"card-header"},[this._v("Example Component")]),this._v(" "),e("div",{staticClass:"card-body"},[this._v("\n                    I'm an example component.\n                ")])])])])])}],!1,null,null,null).exports,v={name:"EditableText",data:function(){return{editing:!1,currentText:this.text}},props:{text:{type:String,required:!0}},methods:{edit:function(){this.editing=!1,this.$emit("edited",this.currentText),this.currentText=""}},watch:{text:function(t){this.currentText=this.text}}},f=Object(s.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.editing?t._e():a("span",{on:{dblclick:function(e){t.editing=!0}}},[t._v("\n        "+t._s(t.text)+"\n    ")]),t._v(" "),t.editing?a("span",{on:{keyup:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.editing=!1},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.edit(e)}]}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentText,expression:"currentText"}],attrs:{type:"text"},domProps:{value:t.currentText},on:{input:function(e){e.target.composing||(t.currentText=e.target.value)}}})]):t._e()])},[],!1,null,null,null).exports,p={all:function(t){return t},completed:function(t){return t.filter(function(t){return t.completed})},active:function(t){return t.filter(function(t){return!t.completed})}},m={components:{"editable-text":f},data:function(){return{errorMessage:!1,filter:"all",newTask:"",dataTasks:this.tasks}},props:{tasks:{type:Array,default:function(){return[]}}},computed:{filteredTasks:function(){return p[this.filter](this.dataTasks)},total:function(){return this.dataTasks.length}},watch:{tasks:function(t){this.dataTasks=t}},methods:{editName:function(t,e){console.log("acho"),axios.put("/api/v1/tasks/"+t.id,{name:e,completed:t.completed}).then(function(a){console.log(a),t.name=e}).catch(function(t){console.log(response)})},estaCompletada:function(t){return t.completed},add:function(){var t=this;axios.post("/api/v1/tasks",{name:this.newTask,completed:!1}).then(function(e){t.dataTasks.splice(0,0,{id:e.data.id,name:t.newTask,completed:t.completed}),t.newTask=""}).catch(function(t){console.log(response)})},remove:function(t){var e=this;console.log("estic dins del remove"),window.console.log(t.id),axios.delete("/api/v1/tasks/"+t.id,{}).then(function(a){console.log("ok"),e.dataTasks.splice(e.dataTasks.indexOf(t),1)}).catch(function(t){})},setFilter:function(t){this.filter=t},colorButtonComplete:function(t){return t.completed?"bg-red-light hover:bg-red":"bg-green-light hover:bg-green"},textButtonComplete:function(t){return t.completed?"Descompletar":"Completar"},toggleCompleted:function(t){var e=this;t.completed?window.axios.delete("/api/v1/completed_task/"+t.id).then(function(a){e.$snackbar.showMessage("S'ha descompletat correctament la tasca"),e.dataTasks.splice(e.dataTasks.indexOf(t),1,a.data)}).catch(function(t){e.$snackbar.showError(t.message)}):window.axios.post("/api/v1/completed_task/"+t.id).then(function(a){e.$snackbar.showMessage("S'ha completat correctament la tasca"),e.dataTasks.splice(e.dataTasks.indexOf(t),1,a.data)}).catch(function(t){e.$snackbar.showError(t.message)})}},created:function(){var t=this;0===this.dataTasks.length?(console.log("entra if"),this.dataTasks=axios.get("/api/v1/tasks").then(function(e){console.log("entra ok"),console.log(e.data),t.dataTasks=e.data}).catch(function(e){console.log("entra_error"),t.errorMessage=e.response})):console.log("else")}},h=(a("Jm0l"),Object(s.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inline-flex"},[a("div"),t._v(" "),a("div",{staticClass:"overflow-visible content-center"},[t.errorMessage?a("div",[t._v("\n                Hi ha un error: "+t._s(t.errorMessage)+"\n\n            ")]):t._e(),t._v(" "),a("h1",{staticClass:"text-pink-lighter antialiased text-4x1"},[t._v("Tasques")]),t._v(" "),a("div",{staticClass:"inline-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newTask,expression:"newTask"}],staticClass:"shadow-lg border rounded w-full pa-2 px-3 mr-2 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",attrs:{type:"text",placeholder:"Introdueix una tasca",name:"name"},domProps:{value:t.newTask},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add(e)},input:function(e){e.target.composing||(t.newTask=e.target.value)}}}),t._v(" "),a("button",{staticClass:"bg-blue hover:bg-blue-dark text-white font-bold py-2 px-4 rounded",attrs:{id:"button_add_task"},on:{click:function(e){return t.add()}}},[t._v("Afegir")])]),t._v(" "),a("ul",{staticClass:"list-reset m-3 pl-5"},t._l(t.filteredTasks,function(e){return a("li",{key:e.id,staticClass:"text-grey-darker"},[a("span",{class:{strike:t.estaCompletada(e)}},[a("editable-text",{attrs:{text:e.name},on:{edited:function(a){return t.editName(e,a)}}})],1),t._v(" "),a("span",{attrs:{id:"delete_task_"+e.id},on:{click:function(a){return t.remove(e)}}},[t._v("❌")]),t._v(" "),a("button",{staticClass:"m-2 p-3 bg-grey-light hover:bg-grey text-grey-darkest font-bold rounded inline-flex items-center",on:{click:t.editName}},[a("svg",{staticClass:"w-4 h-4 mr-2",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[a("path",{attrs:{d:"M12.3 3.7l4 4L4 20H0v-4L12.3 3.7zm1.4-1.4L16 0l4 4-2.3 2.3-4-4z"}})]),t._v(" "),a("span",[t._v("Edita")])]),t._v(" "),a("button",{staticClass:"m-2 p-3 text-grey-darkest font-bold rounded inline-flex items-center",class:t.colorButtonComplete(e),on:{click:function(a){return t.toggleCompleted(e)}}},[a("svg",{staticClass:"w-4 h-4 mr-2",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[a("path",{attrs:{d:"M0 11l2-2 5 5L18 3l2 2L7 18z"}})]),t._v(" "),a("span",[t._v(t._s(t.textButtonComplete(e)))])])])}),0)]),t._v(" "),a("div",[t.total>0?[a("h3",[t._v("Filtres:")]),t._v(" "),a("h5",[t._v("Active filter: "+t._s(t.filter))]),t._v(" "),a("ul",[a("li",{staticClass:"list-reset justify-start"},[a("button",{on:{click:function(e){return t.setFilter("all")}}},[t._v("Totes")])]),t._v(" "),a("li",{staticClass:"list-reset justify-start"},[a("button",{on:{click:function(e){return t.setFilter("completed")}}},[t._v("Completades")])]),t._v(" "),a("li",{staticClass:"list-reset justify-start"},[a("button",{on:{click:function(e){return t.setFilter("active")}}},[t._v("Actives")])])])]:t._e(),t._v("\n    Total: "+t._s(t.total)+"\n  ")],2)])},[],!1,null,null,null).exports),g=a("Hc5T"),_=a("ta7f"),b={name:"TaskTagsChips",data:function(){return{dialog:!1,newTag:"",dataSelectedTags:this.selectedTags,data:"",dataTask:this.task}},model:{prop:"selectedTags",event:"updated"},props:{task:{type:Object,default:function(){return{}}},tags:{type:Array,required:!0},selectedTags:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1}},methods:{add:function(){this.$emit("updated",this.dataSelectedTags),this.dialog=!1},removeTag:function(t){this.$emit("deleted",t)}}},k=Object(s.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-dialog",{attrs:{width:"400"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v("Afegir una etiqueta a la tasca "+t._s(t.dataTask.name))]),t._v(" "),a("v-card-text",[a("v-combobox",{attrs:{items:t.tags,"item-text":"name","item-value":"name",label:"Escull o tria una etiqueta",multiple:"",chips:"",readonly:t.readonly},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",[a("v-chip",{key:JSON.stringify(e.item),staticClass:"v-chip--select-multi ",attrs:{selected:e.selected,disabled:e.disabled},on:{input:function(t){return e.parent.selectItem(e.item)}}},[t._v("\n              "+t._s(e.item.name)+"\n            ")])],1)]}}]),model:{value:t.dataSelectedTags,callback:function(e){t.dataSelectedTags=e},expression:"dataSelectedTags"}})],1),t._v(" "),a("v-divider"),t._v(" "),t.readonly?t._e():a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){return t.add()}}},[t._v("Afegir")])],1)],1)],1),t._v(" "),t._l(t.dataTask.tags,function(e){return a("v-chip",{key:e.id,attrs:{color:e.color},domProps:{textContent:t._s(e.name)},on:{dblclick:function(a){return t.removeTag(e)}}})}),t._v(" "),t.readonly?t._e():a("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!0}}},[a("v-icon",[t._v("add")])],1)],2)},[],!1,null,"227710c0",null).exports,x={components:{TaskTagsChips:k},mixins:[g.validationMixin],validations:{name:{required:_.required}},name:"TaskForm",data:function(){return{loading:!1,name:this.task.name,editingTask:{id:this.task.id,name:this.task.name,completed:this.task.completed,description:this.task.description,user_id:this.task.user_id,tags:this.task.tags}}},props:{users:{type:Array,required:!0},tags:{type:Array,required:!0},uri:{type:String,default:"/api/v1/tasks"},task:{type:Object,default:function(){return{tags:[]}}}},computed:{nameErrors:function(){var t=[];return console.log(this.$v),this.$v.name.$dirty?(!this.$v.name.required&&t.push("El nom és obligatori"),t):t}},methods:{reset:function(){this.editingTask.name="",this.editingTask.description="",this.editingTask.completed=!1,this.editingTask.user_id=""},create:function(){this.loading=!0;var t={name:this.name,description:this.editingTask.description,completed:this.editingTask.completed,user_id:this.editingTask.user.id,tags:this.editingTask.tags};this.$emit("saved",t)}}},w=Object(s.a)(x,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",[a("v-text-field",{attrs:{"error-messages":t.nameErrors,disabled:t.loading,label:"Nom",hint:"El nom de la tasca..."},on:{input:function(e){return t.$v.name.$touch()},blur:function(e){return t.$v.name.$touch()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),a("v-switch",{attrs:{disabled:t.loading,label:t.editingTask.completed?"Completada":"Pendent"},model:{value:t.editingTask.completed,callback:function(e){t.$set(t.editingTask,"completed",e)},expression:"editingTask.completed"}}),t._v(" "),a("span",[t._v("Tags: "),a("task-tags-chips",{attrs:{"selected-tasks":t.editingTask.tags,task:t.editingTask,tags:t.tags},model:{value:t.editingTask.tags,callback:function(e){t.$set(t.editingTask,"tags",e)},expression:"editingTask.tags"}})],1),t._v(" "),a("user-select",{attrs:{users:t.users,label:"User"},model:{value:t.editingTask.user_id,callback:function(e){t.$set(t.editingTask,"user_id",e)},expression:"editingTask.user_id"}}),t._v(" "),a("v-textarea",{attrs:{label:"Descripcio",hint:"Descripció",disabled:t.loading},model:{value:t.editingTask.description,callback:function(e){t.$set(t.editingTask,"description",e)},expression:"editingTask.description"}}),t._v(" "),a("div",{staticClass:"text-xs-center"},[a("v-btn",{staticClass:"grey--text",attrs:{flat:"",disabled:t.loading,loading:t.loading},nativeOn:{click:function(e){return t.$emit("close")}}},[t._v("\n        Sortir\n    ")]),t._v(" "),a("v-btn",{attrs:{color:"success",disabled:t.loading||t.$v.$invalid,loading:t.loading},nativeOn:{click:function(e){return t.create(e)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("save")]),t._v("\n      Guardar\n    ")],1)],1)],1)},[],!1,null,null,null).exports,y={name:"TaskCreate",components:{TaskForm:w},data:function(){return{dialog:!1,dataUsers:{}}},props:{users:{type:Array,required:!0},tags:{type:Array,required:!0},uri:{type:String,default:"/api/v1/tasks"}},methods:{created:function(t){var e=this;window.axios.post(this.uri,t).then(function(t){e.$snackbar.showMessage("S'ha creat correctament la tasca"),e.$emit("created",t.data)}).catch(function(t){e.$snackbar.showError(t.message)}).finally(function(){e.dialog=!1})}}},C=Object(s.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-dialog",{on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-toolbar",{staticClass:"white--text",attrs:{color:"primary"}},[a("span",{staticClass:"hidden-md-and-down"},[t._v("Crear tasca")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("exit_to_app")]),t._v("\n      Sortir\n    ")],1),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("save")]),t._v("\n      Guardar\n    ")],1)],1),t._v(" "),a("v-card",[a("v-card-text",[a("task-form",{attrs:{tags:t.tags,users:t.users},on:{close:function(e){t.dialog=!1},saved:t.created}})],1)],1)],1),t._v(" "),t.$can("user.tasks.store")?a("v-btn",{staticClass:"white--text",attrs:{fab:"",bottom:"",right:"",color:"accent",fixed:""},on:{click:function(e){t.dialog=!0}}},[a("v-icon",[t._v("add")])],1):t._e()],1)},[],!1,null,null,null).exports,T=a("o0o1"),E=a.n(T);function $(t,e,a,i,s,n,r){try{var o=t[n](r),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(i,s)}function S(t){return function(){var e=this,a=arguments;return new Promise(function(i,s){var n=t.apply(e,a);function r(t){$(n,i,s,r,o,"next",t)}function o(t){$(n,i,s,r,o,"throw",t)}r(void 0)})}}var O={name:"Toggle",data:function(){return{dataStatus:this.status,dataTask:this.task,loading:!1}},props:{task:{type:Object,required:!0},status:{type:Boolean,required:!0},readonly:{type:Boolean,default:!1}},watch:{dataStatus:{handler:function(t){t!==this.dataTask.completed&&(t?this.completeTask():this.uncompleteTask())}},task:function(t){this.dataTask=t},status:function(t){this.dataStatus=t}},methods:{uncompleteTask:function(){var t=S(E.a.mark(function t(){var e=this;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,window.axios.delete("/api/v1/completed_task/"+this.task.id).then(function(t){e.$snackbar.showMessage("S'ha descompletat correctament la tasca"),e.loading=!1,e.dataTask.completed=!1}).catch(function(t){e.$snackbar.showError(t.message),e.removing=null,e.loading=null,e.dataStatus=!e.dataStatus});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),completeTask:function(){var t=S(E.a.mark(function t(){var e=this;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,window.axios.post("/api/v1/completed_task/"+this.task.id).then(function(t){e.$snackbar.showMessage("S'ha completat correctament la tasca"),e.loading=!1,e.dataTask.completed=!0}).catch(function(t){e.$snackbar.showError(t.message),e.removing=null,e.loading=null,e.dataStatus=!e.dataStatus});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},N=Object(s.a)(O,function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-switch",{attrs:{readonly:t.readonly,loading:t.loading,disabled:t.loading,label:t.dataTask.completed?"Completada":"Pendent"},model:{value:t.dataStatus,callback:function(e){t.dataStatus=e},expression:"dataStatus"}})},[],!1,null,null,null).exports,A={name:"task-edit",components:{TaskForm:w},data:function(){return{loading:!1,dataUsers:this.users,dialog:!1}},props:{users:{type:Array,required:!0},task:{type:Object,required:!0},uri:{type:String,default:"/api/v1/tasks"},tags:{type:Array,required:!0}},watch:{task:function(t){this.updateUser(t)}},methods:{updateUser:function(t){this.user=this.users.find(function(e){return parseInt(e.id)===parseInt(t.user_id)})},edit:function(t){var e=this;this.loading=!0,window.axios.put(this.uri+"/"+this.task.id,t).then(function(t){e.$snackbar.showMessage("S'ha editat correctament la tasca"),e.$emit("edited",t.data)}).catch(function(t){e.$snackbar.showError(t.message),e.loading=!1,e.dialog=!1}).finally(function(){e.loading=!1,e.dialog=!1})}},created:function(){this.updateUser(this.task)}},j=Object(s.a)(A,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.$can("tasks.update",t.task)?a("v-btn",{staticClass:"hidden-md-and-down",attrs:{color:"success",icon:"",flat:"",title:"Modificar la tasca"},on:{click:function(e){t.dialog=!0}}},[a("v-icon",[t._v("border_color")])],1):t._e(),t._v(" "),t.$can("tasks.update",t.task)?a("v-list-tile",{staticClass:"hidden-lg-and-up",on:{click:function(e){t.dialog=!0}}},[a("v-list-tile-title",[t._v("Editar")]),t._v(" "),a("v-list-tile-action",[a("v-icon",{attrs:{color:"success",title:"Modificar la tasca"}},[t._v("border_color")])],1),t._v(" "),a("v-dialog",{on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-toolbar",{staticClass:"white--text",attrs:{color:"primary"}},[a("span",{staticClass:"hidden-md-and-down"},[t._v("Editar tasca")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("exit_to_app")]),t._v("\n        Sortir\n      ")],1),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("save")]),t._v("\n        Guardar\n      ")],1)],1),t._v(" "),!0===t.dialog?a("v-card",[a("v-card-text",[a("task-form",{attrs:{task:t.task,users:t.users,user:t.task.user,tags:t.tags},on:{saved:t.edit,close:function(e){t.dialog=!1}}})],1)],1):t._e()],1)],1):t._e()],1)},[],!1,null,null,null).exports;function q(t,e,a,i,s,n,r){try{var o=t[n](r),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(i,s)}var D={name:"TaskDestroy",data:function(){return{loading:!1}},props:{task:{type:Object,required:!0},uri:{type:String,default:"/api/v1/tasks"}},methods:{destroy:function(){var t,e=(t=E.a.mark(function t(){var e=this;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Les tasques esborrades no es poden recuperar",{title:"Esteu segurs?",buttonTrueText:"Eliminar",buttonFalseText:"Cancel·lar",color:"blue",buttonFalseColor:"grey"});case 2:t.sent&&(this.loading=!0,window.axios.delete(this.uri+"/"+this.task.id).then(function(){e.$emit("removed",e.task),e.$snackbar.showMessage("S'ha esborrat correctament la tasca")}).catch(function(t){e.$snackbar.showError(t.message),e.loading=!1}).finally(function(){e.loading=!1}));case 4:case"end":return t.stop()}},t,this)}),function(){var e=this,a=arguments;return new Promise(function(i,s){var n=t.apply(e,a);function r(t){q(n,i,s,r,o,"next",t)}function o(t){q(n,i,s,r,o,"throw",t)}r(void 0)})});return function(){return e.apply(this,arguments)}}()}},B=Object(s.a)(D,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.$can("tasks.destroy",t.task)?a("v-btn",{staticClass:"hidden-md-and-down",attrs:{loading:t.loading===t.task.id,disabled:t.loading===t.task.id,color:"grey",flat:"",icon:"",title:"Eliminar la tasca"},on:{click:t.destroy}},[a("v-icon",[t._v("delete")])],1):t._e(),t._v(" "),t.$can("tasks.destroy",t.task)?a("v-list-tile",{staticClass:"hidden-lg-and-up",on:{click:t.destroy}},[a("v-list-tile-title",[t._v("Esborrar")]),t._v(" "),a("v-list-tile-action",[a("v-icon",{attrs:{color:"primary",title:"Eliminar la tasca"}},[t._v("delete")])],1)],1):t._e()],1)},[],!1,null,null,null).exports;function U(t,e,a,i,s,n,r){try{var o=t[n](r),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(i,s)}function F(t){return function(){var e=this,a=arguments;return new Promise(function(i,s){var n=t.apply(e,a);function r(t){U(n,i,s,r,o,"next",t)}function o(t){U(n,i,s,r,o,"throw",t)}r(void 0)})}}var P={name:"TaskTags",components:{TaskTagsChips:k},data:function(){return{dialog:!1,newTag:"",selectedTags:[],data:""}},props:{task:{type:Object,required:!0},tags:{type:Array,required:!0}},methods:{add:function(){var t=F(E.a.mark(function t(e){var a=this;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:window.axios.post("/api/v1/task/"+this.task.id+"/tags/multiple",e).then(function(t){a.$snackbar.showMessage("Etiquetes afegides correctament"),a.$emit("updated",t.data)}).catch(function(t){a.$snackbar.showError(t.message)});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),removeTag:function(){var t=F(E.a.mark(function t(e){var a=this;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("",{title:"Esteu segurs?",buttonTrueText:"Eliminar",buttonFalseText:"Cancel·lar",color:"blue"});case 2:t.sent&&window.axios.delete("/api/v1/task/"+this.task.id+"/tags/"+e.id).then(function(t){a.$snackbar.showMessage("Etiqueta eliminada correctament")}).catch(function(t){a.$snackbar.showError(t.message)});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},R=Object(s.a)(P,function(){var t=this,e=t.$createElement;return(t._self._c||e)("task-tags-chips",{attrs:{task:t.task,tags:t.tags},on:{updated:t.add,deleted:t.removeTag},model:{value:t.task.tags,callback:function(e){t.$set(t.task,"tags",e)},expression:"task.tags"}})},[],!1,null,null,null).exports,M={name:"EmptyTasksCreateButton",components:{TaskForm:w},data:function(){return{dialog:!1,dataUsers:{}}},props:{users:{type:Array,required:!0},tags:{type:Array,required:!0},uri:{type:String,default:"/api/v1/tasks"}},methods:{created:function(t){var e=this;window.axios.post(this.uri,t).then(function(t){e.$snackbar.showMessage("S'ha editat correctament la tasca"),e.$emit("created",t.data)}).catch(function(t){e.$snackbar.showError(t.message)}).finally(function(){e.dialog=!1})}}},L=Object(s.a)(M,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-dialog",{on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-toolbar",{staticClass:"white--text",attrs:{color:"primary"}},[a("v-btn",{attrs:{color:"secondary",flat:"",icon:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("close")])],1),t._v("\n\n    Crear tasca\n    "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("exit_to_app")]),t._v("\n      Sortir\n    ")],1),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("save")]),t._v("\n      Guardar\n    ")],1)],1),t._v(" "),a("v-card",[a("v-card-text",[a("task-form",{attrs:{tags:t.tags,users:t.users},on:{close:function(e){t.dialog=!1},saved:t.created}})],1)],1)],1),t._v(" "),t.$can("user.tasks.store")?a("v-btn",{staticClass:"white--text",attrs:{color:"accent"},on:{click:function(e){t.dialog=!0}}},[t._v("\n          Crea la primera tasca!\n\n      ")]):t._e()],1)},[],!1,null,null,null).exports,I={name:"task-show",components:{TaskTagsChips:k,TaskForm:w},data:function(){return{loading:!1,dataUsers:this.users,dialog:!1}},props:{users:{type:Array,required:!0},task:{type:Object,required:!0},uri:{type:String,default:"/api/v1/tasks"},tags:{type:Array,required:!0}},watch:{task:function(t){this.updateUser(t)}},methods:{updateUser:function(t){this.user=this.users.find(function(e){return parseInt(e.id)===parseInt(t.user_id)})},edit:function(t){var e=this;this.loading=!0,window.axios.put(this.uri+"/"+this.task.id,t).then(function(t){e.$snackbar.showMessage("S'ha editat correctament la tasca"),e.$emit("edited",t.data)}).catch(function(t){e.$snackbar.showError(t.message),e.loading=!1,e.dialog=!1}).finally(function(){e.loading=!1,e.dialog=!1})}},created:function(){this.updateUser(this.task)}},V=Object(s.a)(I,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$can("tasks.show",t.task)?a("v-list-tile",{staticClass:"hidden-lg-and-up",on:{click:function(e){t.dialog=!0}}},[a("v-list-tile-title",[t._v("Detalls")]),t._v(" "),a("v-list-tile-action",[a("v-icon",{attrs:{color:"success",title:"Mira els detalls de la tasca"}},[t._v("remove_red_eye")])],1),t._v(" "),a("v-dialog",{on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-toolbar",{staticClass:"secondary darken-2",attrs:{dark:""}},[a("v-btn",{attrs:{color:"white",flat:"",icon:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("close")])],1),t._v(" "),a("span",{staticClass:"title"},[t._v(t._s(t.task.name))]),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-card",[a("v-card-text",[a("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[a("v-flex",{staticClass:"pt-2 pb-2",attrs:{xs5:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-avatar",{attrs:{size:"100"}},[a("img",{attrs:{alt:t.task.user_name,src:t.task.user_gravatar}})])],1),t._v(" "),a("v-flex",{staticClass:"pt-2",attrs:{xs12:""}},[a("span",{staticClass:"subheading"},[t._v(t._s(t.task.user_name))])])],1),t._v(" "),a("v-flex",{attrs:{xs7:""}},[a("v-list",{staticClass:"pb-3 pb-3"},[a("v-list-tile",[a("v-list-tile-content",[a("task-completed-toggle",{attrs:{readonly:!0,status:t.task.completed,task:t.task,tags:t.tags}})],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-content",[a("v-tooltip",{attrs:{bottom:""}},[a("span",{staticClass:"font-weight-thin",attrs:{slot:"activator"},slot:"activator"},[t._v(" "+t._s(t.task.description)+" ")]),t._v(" "),a("span",[t._v("Descripció")])])],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-content",[a("task-tags-chips",{attrs:{task:t.task,tags:t.tags,"selected-tags":t.task.tags,readonly:!0}})],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-content",[a("v-tooltip",{attrs:{bottom:""}},[a("span",{staticClass:"subheading font-weight-thin grey--text",attrs:{slot:"activator"},slot:"activator"},[t._v(" Creada "+t._s(t.task.created_at_human)+" ")]),t._v(" "),a("span",[t._v(t._s(t.task.created_at_formatted))])])],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-content",[a("v-tooltip",{attrs:{bottom:""}},[a("span",{staticClass:"subheading font-weight-thin grey--text",attrs:{slot:"activator"},slot:"activator"},[t._v(" Actualitzada "+t._s(t.task.updated_at_human)+" ")]),t._v(" "),a("span",[t._v(t._s(t.task.updated_at_formatted))])])],1)],1)],1)],1)],1)],1)],1)],1)],1):t._e()},[],!1,null,null,null).exports,G={name:"task-show-content",components:{TaskTagsChips:k},props:{tags:{type:Array,required:!0},task:{type:Object,required:!0},user:{type:Object,default:function(){return this.task.user}}}},Y=Object(s.a)(G,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[a("v-flex",{staticClass:"pt-2 pb-2",attrs:{xs5:"",md4:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-avatar",{attrs:{size:"100"}},[a("img",{attrs:{alt:t.user.name,src:t.user.gravatar}})])],1),t._v(" "),a("v-flex",{staticClass:"pt-2",attrs:{xs12:"",md4:""}},[a("span",{staticClass:"subheading"},[t._v(t._s(t.task.user_name))])])],1),t._v(" "),a("v-flex",{attrs:{xs7:"",md4:""}},[a("v-list",{staticClass:"pb-3 pb-3"},[a("v-list-tile",[a("v-list-tile-content",[a("task-completed-toggle",{attrs:{readonly:!0,status:t.task.completed,task:t.task,tags:t.tags}})],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-content",[a("v-tooltip",{attrs:{bottom:""}},[a("span",{staticClass:"font-weight-thin",attrs:{slot:"activator"},slot:"activator"},[t._v(" "+t._s(t.task.description)+" ")]),t._v(" "),a("span",[t._v("Descripció")])])],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-content",[a("task-tags-chips",{attrs:{task:t.task,tags:t.tags,"selected-tags":t.task.tags,readonly:!0}})],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-content",[a("v-tooltip",{attrs:{bottom:""}},[a("span",{staticClass:"subheading font-weight-bold grey--text",attrs:{slot:"activator"},slot:"activator"},[t._v(" Creada "+t._s(t.task.created_at_human)+" ")]),t._v(" "),a("span",[t._v(t._s(t.task.created_at_formatted))])]),t._v(" "),t.$vuetify.breakpoint.mdAndUp?a("span",[t._v(" "+t._s(t.task.created_at_formatted))]):t._e()],1)],1),t._v(" "),a("v-list-tile",[a("v-list-tile-content",[a("v-tooltip",{attrs:{bottom:""}},[a("span",{staticClass:"subheading font-weight-bold grey--text",attrs:{slot:"activator"},slot:"activator"},[t._v(" Actualitzada "+t._s(t.task.updated_at_human)+" ")]),t._v(" "),a("span",[t._v(t._s(t.task.updated_at_formatted))])]),t._v(" "),t.$vuetify.breakpoint.mdAndUp?a("span",[t._v(" "+t._s(t.task.updated_at_formatted))]):t._e()],1)],1)],1)],1)],1)},[],!1,null,null,null).exports,z={name:"task-show-mobile",components:{TaskShowContent:Y},data:function(){return{loading:!1,dataUsers:this.users,dialog:!1}},props:{users:{type:Array,required:!0},task:{type:Object,required:!0},uri:{type:String,default:"/api/v1/tasks"},tags:{type:Array,required:!0}},watch:{task:function(t){this.updateUser(t)}},methods:{updateUser:function(t){this.user=this.users.find(function(e){return parseInt(e.id)===parseInt(t.user_id)})},edit:function(t){var e=this;this.loading=!0,window.axios.put(this.uri+"/"+this.task.id,t).then(function(t){e.$snackbar.showMessage("S'ha editat correctament la tasca"),e.$emit("edited",t.data)}).catch(function(t){e.$snackbar.showError(t.message),e.loading=!1,e.dialog=!1}).finally(function(){e.loading=!1,e.dialog=!1})}},created:function(){this.updateUser(this.task)}},K=Object(s.a)(z,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.$can("tasks.show",t.task)?a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(e){t.dialog=!0}}},[a("v-icon",{attrs:{color:"success",title:"Mira els detalls de la tasca"}},[t._v("remove_red_eye")])],1):t._e(),t._v(" "),a("v-dialog",{attrs:{"max-width":"1000"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-toolbar",{staticClass:"secondary darken-2",attrs:{dark:""}},[a("v-btn",{attrs:{color:"white",flat:"",icon:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("close")])],1),t._v(" "),a("span",{staticClass:"title"},[t._v(t._s(t.task.name))]),t._v(" "),a("v-spacer")],1),t._v(" "),!0===t.dialog?a("v-card",[a("v-card-text",[a("task-show-content",{attrs:{tags:t.tags,task:t.task}})],1)],1):t._e()],1)],1)},[],!1,null,null,null).exports,W={name:"Share",data:function(){return{dataTitle:this.title,dataText:this.text,dataUrl:this.url}},props:{title:{type:String,default:"Tasques Joan Tíscar"},text:{type:String,default:"pos moltes mes tasques"},url:{type:String,default:"https://tasks.joantiscar.scool.cat"},menu:{type:Boolean,default:!1}},computed:{show:function(){return"share"in navigator}},methods:{share:function(){navigator.share({title:this.dataTitle,text:this.dataText,url:this.dataUrl}).then(function(){return console.log("Successful share")}).catch(function(t){return console.log("Error sharing:",t)})}}},H=Object(s.a)(W,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("v-btn",{attrs:{color:"accent",dark:"",icon:"",flat:""},on:{click:t.share}},[t.menu?a("span",{staticClass:"mr-2"},[t._v("Comparteix")]):t._e(),t._v(" "),a("v-icon",[t._v("share")])],1):t._e()},[],!1,null,null,null).exports,J={name:"ShareTask",data:function(){return{dataTitle:this.title,dataText:this.text,dataUrl:this.url}},props:{task:{type:Object,required:!0}},computed:{show:function(){return"share"in navigator}},methods:{share:function(){navigator.share({title:"Tasca "+this.task.name,text:this.task.description,url:"https://tasks.joantiscar.scool.cat/tasques/"+this.task.id}).then(function(){return console.log("Successful share")}).catch(function(t){return console.log("Error sharing:",t)})}}},X={name:"tasks-list",components:{ShareTask:Object(s.a)(J,function(){var t=this.$createElement,e=this._self._c||t;return this.show?e("v-btn",{attrs:{color:"accent",dark:"",icon:"",flat:""},on:{click:this.share}},[e("v-icon",[this._v("share")])],1):this._e()},[],!1,null,null,null).exports,Share:H,EmptyTasksCreateButton:L,TaskCompletedToggle:N,TaskEdit:j,TaskCreate:C,TaskDestroy:B,TaskTags:R,TaskShowMobile:V,TaskShow:K},data:function(){return{dataUsers:this.users,search:"",selectedUser:null,selectedStatus:"Totes",dataTasks:this.tasks,loading:!1,headers:[{text:"id",value:"id"},{text:"Nom",value:"name"},{text:"Usuari",value:"user"},{text:"Completat",value:"completed"},{text:"Etiquetes",value:"tags"},{text:"Creat",value:"created_at_timestamp"},{text:"Modificat",value:"updated_at_timestamp"},{text:"Accions",sortable:!1,value:"full_search"}],pagination:{rowsPerPage:25},estats:[{nom:"Totes",valor:"Totes"},{nom:"Completades",valor:!0},{nom:"Pendents",valor:!1}]}},props:{tasks:{type:Array,required:!0},users:{type:Array,required:!0},tags:{type:Array,required:!0},uri:{type:String,default:"/api/v1/tasks"}},computed:{filteredTasks:function(){var t=this,e=this.dataTasks;return null!==this.selectedUser&&(e=e.filter(function(e){return e.user_id===t.selectedUser.id})),"Totes"!==this.selectedStatus&&(e=e.filter(function(e){return e.completed===t.selectedStatus})),e}},methods:{refresh:function(){var t=this;this.loading=!0,window.axios.get(this.uri+"/refresh").then(function(e){console.log(e),t.dataTasks=e.data}).catch(function(e){console.log(e),t.loading=!1}).finally(this.loading=!1)},removeTask:function(t){this.dataTasks.splice(this.dataTasks.indexOf(t),1)},addTask:function(t){this.dataTasks.push(t)},updateTask:function(t){this.dataTasks.splice(this.dataTasks.indexOf(t),1,t)},opcio1:function(){console.log("Opcio1")},opcio2:function(){console.log("Opcio2")}}},Q={name:"Tasques",components:{EmptyTasksCreateButton:L,TasksList:Object(s.a)(X,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.dataTasks.length>0?a("span",[a("v-toolbar",{attrs:{color:"secondary darken-1"}},[a("v-menu",{attrs:{left:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",dark:""},slot:"activator"},[a("v-icon",[t._v("settings")])],1),t._v(" "),a("v-list",[a("v-list-tile",{on:{click:t.opcio1}},[a("v-list-tile-title",[t._v("Opció 1")])],1),t._v(" "),a("v-list-tile",{on:{click:t.opcio2}},[a("v-list-tile-title",[t._v("Opció 2")])],1),t._v(" "),a("v-list-tile",{attrs:{href:"google.com"}},[a("v-list-tile-title",[t._v("Google")])],1)],1)],1),t._v(" "),a("v-toolbar-title",{staticClass:"white--text"},[t._v("Tasques")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{icon:"",dark:""}},[a("v-icon",[t._v("settings")])],1),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{icon:"",dark:"",loading:t.loading,readonly:t.loading},on:{click:t.refresh}},[a("v-icon",[t._v("refresh")])],1)],1),t._v(" "),a("v-card",[a("v-card-title",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("user-select",{staticClass:"pr-4",attrs:{users:t.dataUsers,label:"Filtrar per usuari"},on:{cleared:function(e){t.selectedUser=null}},model:{value:t.selectedUser,callback:function(e){t.selectedUser=e},expression:"selectedUser"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-autocomplete",{staticClass:"pr-4",attrs:{items:t.estats,label:"Filtarar per estat","item-value":"valor","item-text":"nom"},model:{value:t.selectedStatus,callback:function(e){t.selectedStatus=e},expression:"selectedStatus"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t._v(" "),t.$vuetify.breakpoint.lgAndUp?a("v-data-table",{attrs:{headers:t.headers,items:t.filteredTasks,search:t.search,"no-results-text":"No s'ha trobat cap registre coincident",loading:t.loading,"no-data-text":"","rows-per-page-text":"Tasques per pàgina","rows-per-page-items":[5,10,25,50,100,200,{text:"Tots",value:-1}],pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){var i=e.item;return[a("tr",[a("td",[t._v(t._s(i.id))]),t._v(" "),a("td",[t._v(t._s(i.name))]),t._v(" "),a("v-avatar",{attrs:{title:i.user_name}},[a("img",{attrs:{src:i.user_gravatar,alt:"avatar"}})]),t._v(" "),a("td",[a("task-completed-toggle",{attrs:{status:i.completed,task:i,tags:t.tags}})],1),t._v(" "),a("td",[a("task-tags",{attrs:{tags:t.tags,task:i},on:{updated:t.updateTask}})],1),t._v(" "),a("td",[a("span",{attrs:{title:i.created_at_formatted}},[t._v(t._s(i.created_at_human))])]),t._v(" "),a("td",[a("span",{attrs:{title:i.updated_at_formatted}},[t._v(t._s(i.updated_at_human))])]),t._v(" "),a("td",[a("task-destroy",{attrs:{task:i,uri:t.uri},on:{removed:t.removeTask}}),t._v(" "),a("task-edit",{attrs:{tags:t.tags,task:i,users:t.dataUsers},on:{edited:t.refresh}}),t._v(" "),a("task-show",{attrs:{tags:t.tags,task:i,users:t.dataUsers}}),t._v(" "),a("share-task",{attrs:{task:i}})],1)],1)]}}],null,!1,648502505)},[a("v-progress-linear",{attrs:{slot:"progress",color:"secondary",indeterminate:""},slot:"progress"})],1):t._e(),t._v(" "),t.$vuetify.breakpoint.mdAndDown?a("v-data-iterator",{staticClass:"hidden-lg-and-up",attrs:{items:t.filteredTasks,search:t.search,"no-results-text":"No s'ha trobat cap tasca coincident","no-data-text":"No hi ha dades disponibles","rows-per-page-text":"Tasks per pagina","rows-per-page-items":[5,10,25,50,100,{text:"Totes",value:-1}],loading:t.loading,pagination:t.pagination,"content-tag":"v-layout",row:"",wrap:""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item;return a("v-flex",{staticClass:"pa-1 elevation-10",attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[a("v-card",[a("v-toolbar",{staticClass:"secondary darken-2",attrs:{dark:""}},[a("span",{staticClass:"title"},[t._v(t._s(i.name))]),t._v(" "),a("v-spacer"),t._v(" "),a("v-menu",{attrs:{left:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",dark:""},slot:"activator"},[a("v-icon",[t._v("more_vert")])],1),t._v(" "),a("v-list",[a("task-show-mobile",{attrs:{tags:t.tags,task:i,users:t.dataUsers},on:{edited:t.refresh}}),t._v(" "),a("task-edit",{attrs:{tags:t.tags,task:i,users:t.dataUsers},on:{edited:t.refresh}}),t._v(" "),a("task-destroy",{attrs:{task:i,uri:t.uri},on:{removed:t.removeTask}}),t._v(" "),a("share-task",{attrs:{task:i,menu:!0}})],1)],1)],1),t._v(" "),a("v-card-text",[a("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[a("v-flex",{staticClass:"pt-2 pb-2",attrs:{xs5:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-avatar",{attrs:{size:"100"}},[a("img",{attrs:{alt:i.user_name,src:i.user_gravatar}})])],1),t._v(" "),a("v-flex",{staticClass:"pt-2",attrs:{xs12:""}},[a("span",{staticClass:"font-weight-bold grey--text"},[t._v(t._s(i.user_name))])])],1),t._v(" "),a("v-flex",{attrs:{xs7:""}},[a("v-list",{staticClass:"pb-3 pb-3"},[a("v-list-tile",[a("v-list-tile-content",[a("span",{staticClass:"font-weight-thin grey--text"},[t._v(t._s(i.description))])])],1),t._v(" "),a("v-list-tile",[a("v-list-tile-content",[a("task-completed-toggle",{attrs:{status:i.completed,task:i,tags:t.tags}})],1)],1)],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("task-tags",{attrs:{tags:t.tags,task:i},on:{updated:t.updateTask}})],1)],1)],1)}}],null,!1,3906403136)}):t._e(),t._v(" "),a("task-create",{attrs:{tags:t.tags,users:t.users},on:{created:t.addTask}})],1)],1):[a("v-card",[a("v-card-title",[a("v-flex",{attrs:{xs12:""}},[a("img",{attrs:{src:"img/task_not_found.svg"}})])],1),t._v(" "),a("v-card-text",[a("v-flex",{attrs:{xs12:""}},[a("span",{staticClass:"headline text-xs-center"},[t._v("No hi ha cap tasca!")])]),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("empty-tasks-create-button",{attrs:{tags:t.tags,users:t.users},on:{created:t.addTask}})],1)],1)],1)]],2)},[],!1,null,null,null).exports,TaskCreate:C},data:function(){return{name:"",description:"",completed:!1,showName:"",showDescription:"",showCompleted:!1,showUserId:"",dataTasks:this.tasks,taskBeingRemoved:"",taskBeingCreated:{id:"",name:"",user_id:"",completed:!1},taskBeingShown:"",taskBeingEdited:"",createDialog:!1,editDialog:!1,showDialog:!1,user:"Astio",filter:"Totes",dataUsers:this.users,filters:["Totes","Completades","Pendents"],loading:!1,creating:!1,editing:!1,removing:null}},props:{tasks:{type:Array,required:!0},tags:{type:Array,required:!0},users:{type:Array,required:!0},uri:{type:String,required:!0}},methods:{add:function(t){this.dataTasks.push(t)},showCreate:function(){this.createDialog=!0},show:function(t){console.log("Show Task"+t.id)},editTask:function(t){this.dataTasks.splice(this.dataTasks.indexOf(t),1,t)},createTask:function(t){this.dataTasks.splice(0,0,t)},showEdit:function(t){this.editDialog=!0,this.taskBeingEdited=t},showShow:function(t){this.showDialog=!0,this.taskBeingShown=t},complete:function(t){this.taskBeingEdited=t,this.edit()}},created:function(){console.log("Usuari logat:"),console.log(window.laravel_user)}},Z=Object(s.a)(Q,function(){var t=this.$createElement;return(this._self._c||t)("tasks-list",{attrs:{tags:this.tags,tasks:this.dataTasks,users:this.dataUsers}})},[],!1,null,null,null).exports,tt={name:"ShowTask",components:{TaskShowContent:Y,TaskShow:V},data:function(){return{items:[{text:"Tasques",disabled:!1,href:"/tasques"},{text:"Tasca "+this.task.name,disabled:!1,href:"/tasques/"+this.task.id}]}},props:{task:{type:Object,required:!0},tags:{type:Array,required:!0}}},et=Object(s.a)(tt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":"","justify-center":"",row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-breadcrumbs",{attrs:{items:t.items,divider:">"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-toolbar",{attrs:{color:"primary"}},[a("span",{staticClass:"title"},[t._v(t._s(t.task.name))]),t._v(" "),a("v-spacer")],1),t._v(" "),a("task-show-content",{staticClass:"elevation-10",attrs:{task:t.task,tags:t.tags}})],1)],1)},[],!1,null,null,null).exports;function at(t,e,a,i,s,n,r){try{var o=t[n](r),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(i,s)}var it={name:"Tags",data:function(){return{name:"",description:"",completed:!1,showName:"",showDescription:"",showCompleted:!1,dataTags:this.tags,tagBeingRemoved:"",tagBeingCreated:{},tagBeingShown:"",tagBeingEdited:"",createDialog:!1,editDialog:!1,showDialog:!1,filter:"Totes",filters:["Totes","Completades","Pendents"],search:"",loading:!1,creating:!1,editing:!1,removing:null,headers:[{text:"id",value:"id"},{text:"Nom",value:"name"},{text:"Descripció",value:"description"},{text:"Color",value:"color"},{text:"Creat",value:"created_at_timestamp"},{text:"Modificat",value:"updated_at_timestamp"},{text:"Accions",sortable:!1,value:"full_search"}],pagination:{rowsPerPage:25}}},props:{tags:{type:Array,required:!0}},methods:{refresh:function(){var t=this;this.loading=!0,window.axios.get("/api/v1/tags").then(function(e){console.log(e),t.dataTags=e.data}).catch(function(e){console.log(e),t.loading=!1}).finally(this.loading=!1)},opcio1:function(){console.log("Opcio1")},opcio2:function(){console.log("Opcio2")},create:function(){var t=this;this.creating=!0,window.axios.post("/api/v1/tags",this.tagBeingCreated).then(function(e){t.createTag(e.data),t.$snackbar.showMessage("S'ha editat correctament la tag")}).catch(function(e){t.$snackbar.showError(e.message),t.creating=!1,t.editDialog=!1}).finally(function(){t.creating=!1,t.createDialog=!1})},showCreate:function(){this.createDialog=!0},show:function(t){console.log("Show Tag"+t.id)},removeTag:function(t){this.dataTags.splice(this.dataTags.indexOf(t),1)},editTag:function(t){this.dataTags.splice(this.dataTags.indexOf(t),1,t)},createTag:function(t){this.dataTags.splice(0,0,t)},destroy:function(){var t,e=(t=E.a.mark(function t(e){var a=this;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Les tags esborrades no es poden recuperar",{title:"Esteu segurs?",buttonTrueText:"Eliminar",buttonFalseText:"Cancel·lar",color:"blue"});case 2:t.sent&&(this.removing=e.id,window.axios.delete("/api/v1/tags/"+e.id).then(function(){a.removeTag(e),a.$snackbar.showMessage("S'ha esborrat correctament la tag")}).catch(function(t){a.$snackbar.showError(t.message),a.removing=null,a.destroyDialog=!1}).finally(function(){a.removing=null,a.destroyDialog=!1}));case 4:case"end":return t.stop()}},t,this)}),function(){var e=this,a=arguments;return new Promise(function(i,s){var n=t.apply(e,a);function r(t){at(n,i,s,r,o,"next",t)}function o(t){at(n,i,s,r,o,"throw",t)}r(void 0)})});return function(t){return e.apply(this,arguments)}}(),edit:function(){var t=this;this.editing=!0,window.axios.put("/api/v1/tags/"+this.tagBeingEdited.id,this.tagBeingEdited).then(function(){t.editTag(t.tagBeingEdited),t.$snackbar.showMessage("S'ha editat correctament la tag")}).catch(function(e){t.$snackbar.showError(e.message),t.editing=!1,t.editDialog=!1}).finally(function(){t.editing=!1,t.editDialog=!1})},showEdit:function(t){this.editDialog=!0,this.tagBeingEdited=t},showShow:function(t){this.showDialog=!0,this.tagBeingShown=t},complete:function(t){this.tagBeingEdited=t,this.edit()}},created:function(){console.log("Usuari logat:"),console.log(window.laravel_user)}},st=Object(s.a)(it,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.dataTags.length>0,expression:"dataTags.length > 0"}]},[a("v-dialog",{on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.editDialog=!1}},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[a("v-toolbar",{staticClass:"white--text",attrs:{color:"primary"}},[a("v-btn",{attrs:{color:"secondary",flat:"",icon:""},nativeOn:{click:function(e){t.editDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("close")])],1),t._v(" "),a("span",{staticClass:"hidden-md-and-down"},[t._v("Editar tag")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.editDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("exit_to_app")]),t._v("Sortir")],1),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.editDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("save")]),t._v("Guardar")],1)],1),t._v(" "),a("v-card",[a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Nom",hint:"El nom de la tag..."},model:{value:t.tagBeingEdited.name,callback:function(e){t.$set(t.tagBeingEdited,"name",e)},expression:"tagBeingEdited.name"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tagBeingEdited.color,expression:"tagBeingEdited.color"}],attrs:{type:"color"},domProps:{value:t.tagBeingEdited.color},on:{input:function(e){e.target.composing||t.$set(t.tagBeingEdited,"color",e.target.value)}}}),t._v(" "),a("v-textarea",{attrs:{label:"Descripcio",hint:"Descripció"},model:{value:t.tagBeingEdited.description,callback:function(e){t.$set(t.tagBeingEdited,"description",e)},expression:"tagBeingEdited.description"}}),t._v(" "),a("div",{staticClass:"text-xs-center"},[a("v-btn",{attrs:{color:"secondary"},nativeOn:{click:function(e){t.editDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("exit_to_app")]),t._v("Sortir")],1),t._v(" "),a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.edit()}}},[a("v-icon",{staticClass:"mr-1"},[t._v("save")]),t._v("Guardar")],1)],1)],1)],1)],1)],1),t._v(" "),a("v-dialog",{on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.showDialog=!1}},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("v-toolbar",{staticClass:"white--text",attrs:{color:"primary"}},[a("v-btn",{attrs:{color:"secondary",flat:"",icon:""},nativeOn:{click:function(e){t.showDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("close")])],1),t._v(" "),a("span",{staticClass:"hidden-md-and-down"},[t._v("Crear tag")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.showDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("exit_to_app")]),t._v("Sortir")],1),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.showDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("save")]),t._v("Guardar")],1)],1),t._v(" "),a("v-card",[a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{readonly:"",label:"Nom",hint:"El nom de la tag..."},model:{value:t.tagBeingShown.name,callback:function(e){t.$set(t.tagBeingShown,"name",e)},expression:"tagBeingShown.name"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tagBeingEdited.color,expression:"tagBeingEdited.color"}],attrs:{type:"color",readonly:""},domProps:{value:t.tagBeingEdited.color},on:{input:function(e){e.target.composing||t.$set(t.tagBeingEdited,"color",e.target.value)}}}),t._v(" "),a("v-textarea",{attrs:{readonly:"",label:"Descripcio",hint:"Descripció"},model:{value:t.tagBeingShown.description,callback:function(e){t.$set(t.tagBeingShown,"description",e)},expression:"tagBeingShown.description"}}),t._v(" "),a("div",{staticClass:"text-xs-center"},[a("v-btn",{attrs:{color:"secondary"},nativeOn:{click:function(e){t.showDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("exit_to_app")]),t._v("Sortir")],1)],1)],1)],1)],1)],1),t._v(" "),a("v-dialog",{on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.createDialog=!1}},model:{value:t.createDialog,callback:function(e){t.createDialog=e},expression:"createDialog"}},[a("v-toolbar",{staticClass:"white--text",attrs:{color:"primary"}},[a("v-btn",{attrs:{color:"secondary",flat:"",icon:""},nativeOn:{click:function(e){t.createDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("close")])],1),t._v(" "),a("span",{staticClass:"hidden-md-and-down"},[t._v("Crear tag")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.createDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("exit_to_app")]),t._v("Sortir")],1),t._v(" "),a("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){t.createDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("save")]),t._v("Guardar")],1)],1),t._v(" "),a("v-card",[a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Nom",hint:"El nom de la tag..."},model:{value:t.tagBeingCreated.name,callback:function(e){t.$set(t.tagBeingCreated,"name",e)},expression:"tagBeingCreated.name"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tagBeingCreated.color,expression:"tagBeingCreated.color"}],attrs:{type:"color"},domProps:{value:t.tagBeingCreated.color},on:{input:function(e){e.target.composing||t.$set(t.tagBeingCreated,"color",e.target.value)}}}),t._v(" "),a("v-textarea",{attrs:{label:"Descripcio",hint:"Descripció"},model:{value:t.tagBeingCreated.description,callback:function(e){t.$set(t.tagBeingCreated,"description",e)},expression:"tagBeingCreated.description"}}),t._v(" "),a("div",{staticClass:"text-xs-center"},[a("v-btn",{attrs:{color:"secondary"},nativeOn:{click:function(e){t.createDialog=!1}}},[a("v-icon",{staticClass:"mr-1"},[t._v("exit_to_app")]),t._v("Sortir")],1),t._v(" "),a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.create()}}},[a("v-icon",{staticClass:"mr-1"},[t._v("save")]),t._v("Guardar")],1)],1)],1)],1)],1)],1),t._v(" "),a("v-toolbar",{attrs:{color:"secondary darken-1"}},[a("v-menu",{attrs:{left:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",dark:""},slot:"activator"},[a("v-icon",[t._v("settings")])],1),t._v(" "),a("v-list",[a("v-list-tile",{on:{click:t.opcio1}},[a("v-list-tile-title",[t._v("Opció 1")])],1),t._v(" "),a("v-list-tile",{on:{click:t.opcio2}},[a("v-list-tile-title",[t._v("Opció 2")])],1),t._v(" "),a("v-list-tile",{attrs:{href:"google.com"}},[a("v-list-tile-title",[t._v("Google")])],1)],1)],1),t._v(" "),a("v-toolbar-title",{staticClass:"white--text"},[t._v("Tags")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{icon:"",dark:""}},[a("v-icon",[t._v("settings")])],1),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{icon:"",dark:"",loading:t.loading,disabled:t.loading},on:{click:t.refresh}},[a("v-icon",[t._v("refresh")])],1)],1),t._v(" "),a("v-card",[a("v-card-title",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t._v(" "),a("v-data-table",{staticClass:"hidden-md-and-down",attrs:{headers:t.headers,items:t.dataTags,search:t.search,"no-results-text":"No s'ha trobat cap registre coincident",loading:t.loading,"no-data-text":"","rows-per-page-text":"Tags per pàgina","rows-per-page-items":[5,10,25,50,100,200,{text:"Tots",value:-1}],pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){var i=e.item;return[a("tr",[a("td",[t._v(t._s(i.id))]),t._v(" "),a("td",[t._v(t._s(i.name))]),t._v(" "),a("td",[t._v(t._s(i.description))]),t._v(" "),a("td",[a("v-icon",{attrs:{color:i.color}},[t._v("bookmark")])],1),t._v(" "),a("td",[a("span",{attrs:{title:i.created_at_formatted}},[t._v(t._s(i.created_at_human))])]),t._v(" "),a("td",[a("span",{attrs:{title:i.updated_at_formatted}},[t._v(t._s(i.updated_at_human))])]),t._v(" "),a("td",[t.$can("tags.update",i)?a("v-btn",{attrs:{color:"success",icon:"",flat:"",title:"Modificar la tag"},on:{click:function(e){return t.showEdit(i)}}},[a("v-icon",[t._v("border_color")])],1):t._e(),t._v(" "),t.$can("tags.show",i)?a("v-btn",{attrs:{color:"success",icon:"",flat:"",title:"Modificar la tag"},on:{click:function(e){return t.showShow(i)}}},[a("v-icon",[t._v("remove_red_eye")])],1):t._e(),t._v(" "),t.$can("tags.destroy",i)?a("v-btn",{attrs:{loading:t.removing===i.id,disabled:t.removing===i.id,color:"error",flat:"",icon:"",title:"Eliminar la tag"},on:{click:function(e){return t.destroy(i)}}},[a("v-icon",[t._v("delete")])],1):t._e()],1)])]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"secondary",indeterminate:""},slot:"progress"})],1),t._v(" "),a("v-data-iterator",{staticClass:"hidden-lg-and-up",attrs:{items:t.dataTags,search:t.search,"no-results-text":"No s'ha trobat cap tag coincident","no-data-text":"No hi ha dades disponibles","rows-per-page-text":"Tags per pagina","rows-per-page-items":[5,10,25,50,100,{text:"Totes",value:-1}],loading:t.loading,pagination:t.pagination,"content-tag":"v-layout",row:"",wrap:""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item;return a("v-flex",{staticClass:"pa-1 elevation-10",attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[a("v-card",[a("v-toolbar",{staticClass:"secondary darken-2",attrs:{dark:""}},[a("span",{staticClass:"title"},[t._v(t._s(i.name))]),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-card-text",[a("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[a("v-flex",{staticClass:"pt-2 pb-2",attrs:{xs5:""}},[a("v-flex",{staticClass:"pt-2",attrs:{xs12:""}},[a("span",[a("v-icon",{attrs:{color:i.color}},[t._v("bookmark")])],1)])],1),t._v(" "),a("v-flex",{attrs:{xs7:""}},[a("v-list",{staticClass:"pb-3 pb-3"},[a("v-list-tile",[a("v-list-tile-content",[a("span",{staticClass:"font-weight-thin grey--text"},[t._v(t._s(i.description))])])],1)],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer",[t.$can("tags.update",i)?a("v-btn",{attrs:{color:"success",icon:"",flat:"",title:"Modificar la tag"},on:{click:function(e){return t.showEdit(i)}}},[a("v-icon",[t._v("border_color")])],1):t._e(),t._v(" "),t.$can("tags.show",i)?a("v-btn",{attrs:{color:"success",icon:"",flat:"",title:"Modificar la tag"},on:{click:function(e){return t.showShow(i)}}},[a("v-icon",[t._v("remove_red_eye")])],1):t._e(),t._v(" "),t.$can("tags.destroy",i)?a("v-btn",{attrs:{loading:t.removing===i.id,disabled:t.removing===i.id,color:"error",flat:"",icon:"",title:"Eliminar la tag"},on:{click:function(e){return t.destroy(i)}}},[a("v-icon",[t._v("delete")])],1):t._e()],1)],1)],1)],1)}}])})],1),t._v(" "),t.$can("user.tags.store")?a("v-btn",{staticClass:"white--text",attrs:{fab:"",bottom:"",right:"",color:"accent",fixed:""},on:{click:t.showCreate}},[a("v-icon",[t._v("add")])],1):t._e()],1),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0===t.dataTags.length,expression:"dataTags.length === 0"}]},[a("v-card",[a("v-card-title",[a("v-flex",{attrs:{xs12:""}},[a("img",{attrs:{src:"img/task_not_found.svg"}})])],1),t._v(" "),a("v-card-text",[a("v-flex",{attrs:{xs12:""}},[a("span",{staticClass:"headline text-xs-center"},[t._v("No hi ha cap tag!")])]),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{on:{click:t.showCreate}},[t._v("Crean una!")])],1)],1)],1)],1)])},[],!1,null,null,null).exports,nt={mixins:[g.validationMixin],validations:{dataEmail:{required:_.required,minLength:Object(_.minLength)(6),email:_.email},password:{required:_.required,minLength:Object(_.minLength)(6)}},name:"LoginForm",data:function(){return{dataEmail:this.email,password:""}},props:{email:"",csrfToken:""},computed:{emailErrors:function(){var t=[];return this.$v.dataEmail.$dirty?(!this.$v.dataEmail.minLength&&t.push("El camp email ha de tindre una mida minima de 6 caracters"),!this.$v.dataEmail.required&&t.push("El camp email es obligatori"),!this.$v.dataEmail.email&&t.push("El camp email ha de tindre un format mail valid"),t):t},passwordErrors:function(){var t=[];return this.$v.password.$dirty?(!this.$v.password.minLength&&t.push("El camp password ha de tindre una mida minima de 6 caracters"),!this.$v.password.required&&t.push("El camp password es obligatori"),t):t}}},rt=Object(s.a)(nt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{attrs:{action:"/login",method:"post"}},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Login form")]),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-card-text",[a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrfToken}}),t._v(" "),a("v-text-field",{attrs:{"prepend-icon":"person",name:"email",label:"email",type:"text","error-messages":t.emailErrors},on:{input:function(e){return t.$v.dataEmail.$touch()},blur:function(e){return t.$v.dataEmail.$touch()}},model:{value:t.dataEmail,callback:function(e){t.dataEmail=e},expression:"dataEmail"}}),t._v(" "),a("v-text-field",{attrs:{id:"password","prepend-icon":"lock",name:"password",label:"Password",type:"password","error-messages":t.passwordErrors},on:{input:function(e){return t.$v.password.$touch()},blur:function(e){return t.$v.password.$touch()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("span",[t._v("No tens usuari? "),a("a",{attrs:{href:"/register"}},[t._v("Registrat!")])])],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",type:"submit"}},[t._v("Login")])],1)],1)},[],!1,null,"d6efcd08",null).exports,ot={mixins:[g.validationMixin],validations:{name:{required:_.required,minLength:Object(_.minLength)(3)},dataEmail:{required:_.required,minLength:Object(_.minLength)(6),email:_.email},password:{required:_.required,minLength:Object(_.minLength)(6)},password_confirmation:{sameAsPassword:Object(_.sameAs)("password")}},name:"LoginForm",data:function(){return{dataEmail:this.email,name:"",password:"",password_confirmation:""}},props:{email:"",csrfToken:""},computed:{emailErrors:function(){var t=[];return this.$v.dataEmail.$dirty?(!this.$v.dataEmail.minLength&&t.push("El camp email ha de tindre una mida minima de 6 caracters"),!this.$v.dataEmail.required&&t.push("El camp email es obligatori"),!this.$v.dataEmail.email&&t.push("El camp email ha de tindre un format mail valid"),t):t},nameErrors:function(){var t=[];return this.$v.name.$dirty?(!this.$v.name.minLength&&t.push("El camp name ha de tindre una mida minima de 6 caracters"),!this.$v.name.required&&t.push("El camp name es obligatori"),t):t},passwordErrors:function(){var t=[];return this.$v.password.$dirty?(!this.$v.password.minLength&&t.push("El camp password ha de tindre una mida minima de 6 caracters"),!this.$v.password.required&&t.push("El camp password es obligatori"),t):t},password_confirmationErrors:function(){var t=[];return this.$v.password_confirmation.$dirty?(!this.$v.password_confirmation.sameAsPassword&&t.push("Les contrassenyes no coincideixen!"),t):t}}},lt=Object(s.a)(ot,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{attrs:{action:"/register",method:"post"}},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Formulari de registre")]),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-card-text",[a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrfToken}}),t._v(" "),a("v-text-field",{attrs:{"prepend-icon":"person",name:"name",label:"name",type:"text","error-messages":t.nameErrors},on:{input:function(e){return t.$v.name.$touch()},blur:function(e){return t.$v.name.$touch()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),a("v-text-field",{attrs:{"prepend-icon":"person",name:"email",label:"email",type:"text","error-messages":t.emailErrors},on:{input:function(e){return t.$v.dataEmail.$touch()},blur:function(e){return t.$v.dataEmail.$touch()}},model:{value:t.dataEmail,callback:function(e){t.dataEmail=e},expression:"dataEmail"}}),t._v(" "),a("v-text-field",{attrs:{id:"password","prepend-icon":"lock",name:"password",label:"Password",type:"password","error-messages":t.passwordErrors},on:{input:function(e){return t.$v.password.$touch()},blur:function(e){return t.$v.password.$touch()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("v-text-field",{attrs:{id:"password_confirmation","prepend-icon":"lock",name:"password_confirmation",label:"Password Confirmation",type:"password","error-messages":t.password_confirmationErrors},on:{input:function(e){return t.$v.password_confirmation.$touch()},blur:function(e){return t.$v.password_confirmation.$touch()}},model:{value:t.password_confirmation,callback:function(e){t.password_confirmation=e},expression:"password_confirmation"}}),t._v(" "),a("span",[t._v("Ja tens usuari? "),a("a",{attrs:{href:"/login"}},[t._v("Inicia sessió!")])])],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",type:"submit"}},[t._v("Registrat!")])],1)],1)},[],!1,null,"130d3329",null).exports,ct={name:"UserList",data:function(){return{dataUsers:this.users}},props:{users:{type:Array}},created:function(){var t=this;this.users?this.dataUsers=this.users:window.axios.get("api/v1/users").then(function(e){t.dataUsers=e.data}).catch(function(t){console.log(t)})}},dt=Object(s.a)(ct,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{two:"",line:""}},[a("v-select",{attrs:{items:t.dataUsers,label:"Usuari","item-text":t.dataUsers.name,value:t.dataUsers.id}}),t._v(" "),t._l(t.dataUsers,function(e){return[a("v-list-tile",[a("v-list-tile-avatar",[a("v-avatar",{attrs:{title:e.name}},[a("img",{attrs:{src:e.avatar,alt:"avatar"}})])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.name))]),t._v(" "),a("v-list-tile-sub-title",[t._v(t._s(e.email))])],1)],1),t._v(" "),a("v-divider")]})],2)},[],!1,null,"6980747b",null).exports,ut={name:"UserSelect",data:function(){return{selectedUser:this.user}},model:{prop:"user",event:"selected"},props:{itemValue:{type:String,default:"id"},users:{type:Array,required:!0},label:{type:String,default:"Usuaris"},user:{type:Number,default:function(){return null}}},watch:{selectedUser:function(t){t?this.$emit("selected",t):this.$emit("cleared")},users:function(){this.dataUsers=this.users}}},vt=Object(s.a)(ut,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-autocomplete",{attrs:{items:t.users,clearable:!0,label:t.label,"item-value":"id","item-text":"nom"},scopedSlots:t._u([{key:"selection",fn:function(e){var i=e.item;return[a("v-chip",[a("v-avatar",{attrs:{title:i.name}},[a("img",{attrs:{src:i.gravatar,alt:i.name}})]),t._v("\n            "+t._s(i.name)+"\n        ")],1)]}},{key:"item",fn:function(e){var i=e.item;return[a("v-list-tile-avatar",[a("v-avatar",{attrs:{title:i.name}},[a("img",{attrs:{src:i.gravatar,alt:"avatar"}})])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(i.name))]),t._v(" "),a("v-list-tile-sub-title",[t._v(t._s(i.email))])],1)]}}]),model:{value:t.selectedUser,callback:function(e){t.selectedUser=e},expression:"selectedUser"}})},[],!1,null,null,null).exports,ft={name:"Impersonate",data:function(){return{selectedUser:null,dataUsers:this.users}},props:{users:{type:Array,default:function(){return[]}},url:{type:String,default:"/api/v1/users"},label:{type:String,default:"Usuaris"}},created:function(){var t=this;0===this.dataUsers.length&&window.axios.get(this.url).then(function(e){t.dataUsers=e.data}).catch(function(e){t.$snackbar.showError(e.message)})},methods:{impersonate:function(t){console.log("astio"),console.log(t),t&&(window.location.href="/impersonate/take/"+t.id)}}},pt=Object(s.a)(ft,function(){var t=this.$createElement;return(this._self._c||t)("user-select",{attrs:{users:this.dataUsers,label:this.label},on:{selected:this.impersonate}})},[],!1,null,"0b90f42c",null).exports,mt=a("Ro2m"),ht=a.n(mt),gt=(a("L6xF"),{name:"Tema",components:{Swatches:ht.a},data:function(){return{colorPrincipal:window.localStorage.getItem("PRIMARY_COLOR_KEY"),colorSecundari:window.localStorage.getItem("SECONDARY_COLOR_KEY")}},watch:{colorPrincipal:function(){window.localStorage.setItem("PRIMARY_COLOR_KEY",this.colorPrincipal),this.$vuetify.theme.primary=this.colorPrincipal},colorSecundari:function(){window.localStorage.setItem("SECONDARY_COLOR_KEY",this.colorSecundari),this.$vuetify.theme.secondary=this.colorSecundari}},methods:{principalDefault:function(){window.localStorage.removeItem("PRIMARY_COLOR_KEY")},secundariDefault:function(){window.localStorage.removeItem("SECONDARY_COLOR_KEY")}}}),_t=Object(s.a)(gt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[t._v("Tema")]),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-list",{attrs:{subheader:""}},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("swatches",{model:{value:t.colorPrincipal,callback:function(e){t.colorPrincipal=e},expression:"colorPrincipal"}})],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n              Color principal\n            ")])],1),t._v(" "),a("v-list-tile-action",[a("v-btn",{on:{click:t.principalDefault}},[t._v("Default")])],1)],1),t._v(" "),a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("swatches",{model:{value:t.colorSecundari,callback:function(e){t.colorSecundari=e},expression:"colorSecundari"}})],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n              Color secundari\n            ")])],1),t._v(" "),a("v-list-tile-action",[a("v-btn",{on:{click:t.secundariDefault}},[t._v("Default")])],1)],1)],1)],1)],1)},[],!1,null,null,null).exports,bt={name:"GitInfoComponent",data:function(){return{dialog:!1,dataGit:this.git}},props:{git:{type:Object,required:!1}},methods:{githubUri:function(){return this.dataGit.origin.split(":")[1].split(".")[0]},githubURL:function(){return"https://github.com/"+this.githubUri()},githubURLIssues:function(){return this.githubURL()+"/commits/master"},refresh:function(){var t=this;window.axios.get("/api/v1/git/info").then(function(e){t.$snackbar.showMessage("Dades actualitzades correctament"),t.dataGit=e.data}).catch(function(e){t.$snackbar.showError(e.message)})}},created:function(){this.git||(this.dataGit=window.git)}},kt=Object(s.a)(bt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v("\n              Informació versió de l'aplicació\n            ")]),t._v(" "),a("v-card-text",[a("ul",[a("li",[t._v("Branca: "+t._s(t.dataGit.branch))]),t._v(" "),a("li",[t._v("Commit: "+t._s(t.dataGit.commit))]),t._v(" "),a("li",[t._v("Commit_short: "+t._s(t.dataGit.commit_short))]),t._v(" "),a("li",[t._v("Autor: "+t._s(t.dataGit.author_name))]),t._v(" "),a("li",[t._v("Email: "+t._s(t.dataGit.author_email))]),t._v(" "),a("li",[t._v("Missatge: "+t._s(t.dataGit.message))]),t._v(" "),a("li",[t._v("Data: "+t._s(t.dataGit.date_human)+" | "+t._s(t.dataGit.date_formatted))]),t._v(" "),a("li",[t._v("Origin: "+t._s(t.dataGit.origin))]),t._v(" "),a("li",[t._v("Projecte Github: "),a("a",{attrs:{rel:"noreferrer",href:t.githubURL(),target:"_blank"}},[t._v(t._s(t.githubUri()))])]),t._v(" "),a("li",[t._v("Commits Github: "),a("a",{attrs:{rel:"noreferrer",href:t.githubURLIssues(),target:"_blank"}},[t._v(t._s(t.githubUri()))])])])]),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{icon:"",small:"",title:"Actualitzeu les dades/flush de la cache"},on:{click:t.refresh}},[a("v-icon",[t._v("refresh")])],1),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n                Tancar\n              ")])],1)],1)],1),t._v("\n        Versió: "),a("a",{staticClass:"white--text",attrs:{href:"#",click:"dialog=true"},on:{click:function(e){t.dialog=!0}}},[t._v(t._s(t.dataGit.commit_short))])],1)},[],!1,null,null,null).exports,xt={props:{fullWidth:{type:Boolean,default:!1},offset:{type:[Number,String],default:0}},computed:{classes:function(){return{"v-offset--full-width":this.fullWidth}},styles:function(){return{top:"-".concat(this.offset,"px"),marginBottom:"-".concat(this.offset,"px")}}}},wt=(a("kll2"),{name:"MaterialCard",components:{"helper-offset":Object(s.a)(xt,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"v-offset",class:this.classes,style:this.styles},[this._t("default")],2)},[],!1,null,null,null).exports},inheritAttrs:!1,props:{color:{type:String,default:"secondary"},elevation:{type:[Number,String],default:10},inline:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},offset:{type:[Number,String],default:24},title:{type:String,default:void 0},text:{type:String,default:void 0}},computed:{hasOffset:function(){return this.$slots.header||this.$slots.offset||this.title||this.text},styles:function(){return this.hasOffset?{marginBottom:"".concat(this.offset,"px"),marginTop:"".concat(2*this.offset,"px")}:null}}}),yt=(a("SA6t"),Object(s.a)(wt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",t._g(t._b({style:t.styles},"v-card",t.$attrs,!1),t.$listeners),[t.hasOffset?a("helper-offset",{attrs:{inline:t.inline,"full-width":t.fullWidth,offset:t.offset}},[t.$slots.offset?t._t("offset"):a("v-card",{staticClass:"v-card--material__header",class:"elevation-"+t.elevation,attrs:{color:t.color,dark:""}},[t.title||t.text?a("span",[a("h4",{staticClass:"title font-weight-light mb-2",domProps:{textContent:t._s(t.title)}}),t._v(" "),a("p",{staticClass:"category font-weight-thin",domProps:{textContent:t._s(t.text)}})]):t._t("header")],2)],2):t._e(),t._v(" "),a("v-card-text",[t._t("default")],2),t._v(" "),t.$slots.actions?a("v-divider",{staticClass:"mx-3"}):t._e(),t._v(" "),t.$slots.actions?a("v-card-actions",[t._t("actions")],2):t._e()],1)},[],!1,null,null,null).exports),Ct={name:"ConfirmIcon",data:function(){return{dialog:!1}},props:{icon:{type:String,required:!0},color:{type:String,default:"primary"},dark:{type:Boolean,default:!1},title:{type:String,default:"Si us plau confirmeu..."},message:{type:String,default:"Segur que voleu realitzar aquesta acció?"},confirm:{type:String,default:"Confirmar"},cancel:{type:String,default:"Cancel·lar"},working:{type:Boolean,default:!1},tooltip:{type:String,default:null}},watch:{working:function(t,e){e&&(this.dialog=!1)}},methods:{action:function(){this.$emit("confirmed")}}},Tt=Object(s.a)(Ct,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"290"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.tooltip?a("v-tooltip",{attrs:{slot:"activator",bottom:""},slot:"activator"},[a("v-btn",{staticStyle:{margin:"0px"},attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",{attrs:{color:t.color,dark:t.dark}},[t._v(t._s(t.icon))])],1),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.tooltip)}})],1):a("v-btn",{staticStyle:{margin:"0px"},attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",{attrs:{color:t.color,dark:t.dark}},[t._v(t._s(t.icon))])],1),t._v(" "),a("v-card",[a("v-card-title",{staticClass:"headline",domProps:{innerHTML:t._s(t.title)}}),t._v(" "),a("v-card-text",{domProps:{innerHTML:t._s(t.message)}}),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:""},domProps:{innerHTML:t._s(t.cancel)},nativeOn:{click:function(e){t.dialog=!1}}}),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",flat:"",disabled:t.working,loading:t.working,id:"confirm_button"},domProps:{innerHTML:t._s(t.confirm)},nativeOn:{click:function(e){return t.action(e)}}})],1)],1)],1)},[],!1,null,null,null).exports,Et={name:"UserAvatarComponent",components:{"confirm-icon":Tt},data:function(){return{uploading:!1,deleting:!1,path:""}},props:{editable:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},user:{type:Object,default:function(){return{}}},tooltip:{type:String,required:!0},message:{type:String,required:!0},uri:{type:String,required:!0},size:{type:String,default:"40"},alt:{required:!0},src:{type:String,required:!0},tile:{type:Boolean,default:!1},imageTypeName:{type:String,required:!0}},methods:{photoChange:function(t){if(this.uploading=!0,0!==(t.target||t.srcElement).value.length){var e=new FormData;e.append(this.imageTypeName,this.$refs.file.files[0]),this.preview(),this.save(e)}},save:function(t){var e=this;console.log(t),window.axios.post(this.uri,t).then(function(t){e.uploading=!1,e.path=t.data,e.$emit("input",e.path)}).catch(function(t){e.uploading=!1,e.$snackbar.showError(t)})},preview:function(){var t=this;if(this.$refs.file.files&&this.$refs.file.files[0]){var e=new FileReader;e.onload=function(e){t.$refs.previewImage.setAttribute("src",e.target.result)},e.readAsDataURL(this.$refs.file.files[0])}},change:function(){this.editable&&this.$refs.file.click(),this.$emit("click")},remove:function(){var t=this;this.deleting=!0,window.axios.delete(this.uri).then(function(e){t.deleting=!1,t.path="",t.$emit("input",t.path),t.$refs.previewImage.setAttribute("src","img/default.png"),t.user.photo=null}).catch(function(e){t.deleting=!1,t.$snackbar.showError(e)})}}},$t=(a("CX7E"),Object(s.a)(Et,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-avatar",{staticClass:"mx-auto d-block",attrs:{color:"grey lighten-4",size:t.size,tile:t.tile},on:{click:t.change,dblclick:function(e){return t.$emit("dblclick")}}},[a("img",{ref:"previewImage",attrs:{src:t.src,alt:t.alt,title:t.alt}}),t._v(" "),t.editable?a("form",{staticClass:"upload"},[a("input",{ref:"file",attrs:{type:"file",name:"photo",accept:"image/*",disabled:t.uploading},on:{change:t.photoChange}})]):t._e()]),t._v(" "),t.removable&&t.user.photo?a("confirm-icon",{attrs:{icon:"delete",color:"pink",working:t.deleting,tooltip:t.tooltip,message:t.message},on:{confirmed:function(e){return t.remove()}}}):t._e()],1)},[],!1,null,"60458d36",null).exports),St={name:"Profile",components:{ImageUploadComponent:$t,"material-card":yt},data:function(){return{}},props:{user:{type:Object,required:!0}},created:function(){this.csrf_token=window.csrf_token}},Ot=Object(s.a)(St,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{"justify-center":"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md8:""}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary"}},[a("v-toolbar-title",{staticClass:"white--text"},[t._v("Perfil")]),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-form",{staticClass:"mt-4"},[a("v-container",{attrs:{"py-0":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{staticClass:"purple-input",attrs:{label:"User Name"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{staticClass:"purple-input",attrs:{label:"Email Address"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{staticClass:"purple-input",attrs:{label:"Admin"},model:{value:t.user.admin,callback:function(e){t.$set(t.user,"admin",e)},expression:"user.admin"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{staticClass:"purple-input",attrs:{label:"Roles"},model:{value:t.user.roles,callback:function(e){t.$set(t.user,"roles",e)},expression:"user.roles"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-text-field",{staticClass:"purple-input",attrs:{label:"Permissions"},model:{value:t.user.permissions,callback:function(e){t.$set(t.user,"permissions",e)},expression:"user.permissions"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"","text-xs-right":""}},[a("v-btn",{staticClass:"mx-0 font-weight-light",attrs:{color:"success"}},[t._v("\n                                    Modificar\n                                ")])],1)],1)],1)],1)],1)],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("material-card",{staticClass:"v-card-profile"},[a("image-upload-component",{attrs:{slot:"offset","image-type-name":"avatar",size:"130",src:"/user/avatar",uri:"/api/v1/user/avatar",tooltip:"Eliminar foto",message:"Estas segur de que vols borrar el avatar?",removable:!0,editable:!0,user:t.user,alt:t.user.name},slot:"offset"}),t._v(" "),a("v-card-text",{staticClass:"text-xs-center"},[a("p",[t._v("Avatar here")])])],1),t._v(" "),a("material-card",{staticClass:"v-card-profile"},[a("v-avatar",{staticClass:"mx-auto d-block",attrs:{slot:"offset",size:"130"},slot:"offset"},[a("img",{attrs:{src:"/user/photo"}})]),t._v(" "),a("v-card-text",{staticClass:"text-xs-center"},[a("p",[t._v("Username here")]),t._v(" "),a("form",{attrs:{action:"/photo",method:"POST",enctype:"multipart/form-data"}},[a("input",{ref:"avatar",attrs:{type:"file",name:"photo",id:"photo-file-input",accept:"image/*"}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf_token}}),t._v(" "),a("input",{attrs:{type:"submit",value:"Pujar"}})]),t._v(" "),a("v-btn",{staticClass:"font-weight-light",attrs:{color:"success",round:""}},[t._v("Upload Photo")])],1)],1)],1)],1)],1)},[],!1,null,null,null).exports,Nt={name:"SidebarMenu",props:{items:{type:Array,required:!0}},methods:{isActive:function(t){return this.active===t}},computed:{active:function(){return window.location.pathname}}},At=(a("4v43"),Object(s.a)(Nt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{dense:""}},[t._l(t.items,function(e){return[e.heading?a("v-layout",{key:e.heading,class:{"primary lighten-4":t.isActive(e.url)},attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[e.heading?a("v-subheader",{staticClass:"grey--text text--darken-4"},[t._v("\n          "+t._s(e.heading)+"\n        ")]):t._e()],1),t._v(" "),a("v-flex",{staticClass:"text-xs-center",attrs:{xs6:""}},[a("a",{staticClass:"body-2 black--text",attrs:{href:"#!"}},[t._v("EDIT")])])],1):e.children?a("v-list-group",{key:e.text,attrs:{"append-icon":""},model:{value:e.model,callback:function(a){t.$set(e,"model",a)},expression:"item.model"}},[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[e.icon?a("v-list-tile-action",{attrs:{href:e.url},on:{click:function(t){}}},[a("v-icon",{attrs:{color:"primary lighten-1"}},[t._v(t._s(e.icon))])],1):t._e(),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"grey--text text--darken-4"},[t._v("\n            "+t._s(e.text)+"\n          ")])],1)],1),t._v(" "),t._l(e.children,function(i,s){return a("v-list-tile",{key:s,class:{active:t.isActive(i.url)},attrs:{href:i.url},on:{click:function(t){}}},[i.icon?a("v-list-tile-action",{attrs:{href:e.url},on:{click:function(t){}}},[a("v-icon",{attrs:{color:"primary lighten-1"}},[t._v(t._s(i.icon))])],1):t._e(),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"grey--text text--darken-4"},[t._v("\n            "+t._s(i.text)+"\n          ")])],1)],1)})],2):a("v-list-tile",{key:e.text,class:{active:t.isActive(e.url)},attrs:{href:e.url},on:{click:function(t){}}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"primary lighten-1"}},[t._v(t._s(e.icon))])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"grey--text text--darken-4"},[t._v("\n          "+t._s(e.text)+"\n        ")])],1)],1)]})],2)},[],!1,null,"0b9761c4",null).exports),jt={name:"FullScreenDialog",model:{prop:"dialog",event:"toggle"},props:{flat:{type:Boolean,default:!0},badgeColor:{type:String,default:"primary"},badge:{type:Number,default:null},color:{type:String,default:"primary"},icon:{type:String,default:"visibility"},resource:{type:Object,required:!1},dialog:{},title:{type:String,default:""}},methods:{toggle:function(){this.resource?this.dialog?this.$emit("toggle",!1):this.$emit("toggle",this.resource.id):this.$emit("toggle",!this.dialog)}}},qt=Object(s.a)(jt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-btn",{staticClass:"ma-0",attrs:{flat:t.flat,icon:"",title:t.title,color:t.color,dark:""},on:{click:t.toggle}},[t.badge?a("v-badge",{attrs:{left:"",overlap:"",color:t.badgeColor}},[a("span",{attrs:{slot:"badge"},domProps:{textContent:t._s(t.badge)},slot:"badge"}),t._v(" "),a("v-icon",{attrs:{large:""},domProps:{textContent:t._s(t.icon)}})],1):a("v-icon",{domProps:{textContent:t._s(t.icon)}})],1),t._v(" "),t.dialog?a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),e.preventDefault(),t.toggle(e))}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._t("default")],2):t._e()],1)},[],!1,null,null,null).exports,Dt={name:"JsonDialogComponent",data:function(){return{dialog:!1}},props:{json:{required:!0},objectName:{type:String,default:"Objecte"},title:{type:String,default:"Objecte"},name:{type:String,default:"Objecte actual"},icon:{type:String,default:null}}},Bt=Object(s.a)(Dt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{fullscreen:t.$vuetify.breakpoint.xsOnly},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.icon?a("v-btn",{attrs:{slot:"activator",icon:"",title:t.title,flat:"",color:"blue darken-2",dark:""},slot:"activator"},[a("v-icon",{domProps:{textContent:t._s(t.icon)}})],1):a("v-btn",{attrs:{slot:"activator",title:t.title,flat:"",color:"blue darken-2",dark:""},domProps:{textContent:t._s(t.name)},slot:"activator"}),t._v(" "),a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("close")])],1),t._v(" "),a("v-toolbar-title",{domProps:{textContent:t._s(t.title)}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",[a("v-btn",{staticClass:"hidden-sm-and-down",attrs:{dark:"",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("\n                    Sortir\n                    "),a("v-icon",{attrs:{right:"",dark:""}},[t._v("exit_to_app")])],1)],1)],1),t._v(" "),a("v-card-text",[a("tree-view",{attrs:{data:t.json,options:{rootObjectKey:"root"}}})],1)],1)],1)},[],!1,null,null,null).exports,Ut={name:"CompareValues",data:function(){return{dialog:!1}},props:{log:{required:!0},objectName:{type:String,default:"Objecte"},title:{type:String,default:"Objecte"},name:{type:String,default:"Objecte actual"}}},Ft={name:"ChangelogList",components:{"fullscreen-dialog":qt,"json-dialog-component":Bt,"compare-values":Object(s.a)(Ut,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{fullscreen:t.$vuetify.breakpoint.xsOnly},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:t.title,flat:"",color:"blue darken-2",dark:""},domProps:{textContent:t._s(t.name)},slot:"activator"}),t._v(" "),a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("close")])],1),t._v(" "),a("v-toolbar-title",{domProps:{textContent:t._s(t.title)}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",[a("v-btn",{staticClass:"hidden-sm-and-down",attrs:{dark:"",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("\n                    Sortir\n                    "),a("v-icon",{attrs:{right:"",dark:""}},[t._v("exit_to_app")])],1)],1)],1),t._v(" "),a("v-card-text",[t._v("\n            Valor nou:\n            "),a("p",[t._v(t._s(t.log.new_value))]),t._v("\n            Valor àntic:\n            "),a("p",[t._v(t._s(t.log.old_value))])])],1)],1)},[],!1,null,null,null).exports,"changelog-settings":Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.$emit("close")}}},[a("v-icon",[t._v("close")])],1),t._v(" "),a("v-toolbar-title",[t._v(" Configuració del mòdul de registre de canvis")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",[a("v-btn",{staticClass:"hidden-sm-and-down",attrs:{dark:"",flat:""},nativeOn:{click:function(e){return t.$emit("close")}}},[t._v("\n                Sortir\n                "),a("v-icon",{attrs:{right:"",dark:""}},[t._v("exit_to_app")])],1)],1)],1),t._v(" "),a("v-card",[t._v("\n        TODO\n    ")])],1)},[],!1,null,null,null).exports,"user-avatar":$t},data:function(){return{search:"",settingsDialog:!1,refreshing:!1,dataLogs:this.logs,realTime:!0,rowsPerPageItems:[10,25,50,100,500,1e3,{text:"Tots",value:-1}],pagination:{rowsPerPage:10}}},props:{logs:{type:Array,required:!0},users:{type:Array,required:!0},channel:{type:String,default:"App.Log"},title:{type:String,default:"Registre de canvis"},returnUrl:{type:String,default:null},refreshUrl:{type:String,default:"/api/v1/changelog"}},computed:{timeline:function(){return this.dataLogs.slice().reverse()}},watch:{realTime:function(t){t?this.activeRealTime():this.disableRealTime()}},methods:{refresh:function(){this.fetch()},fetch:function(){var t=this;this.refreshing=!0,window.axios.get(this.refreshUrl).then(function(e){t.$snackbar.showMessage("Registre de canvis actualitzat correctament"),t.dataLogs=e.data,t.refreshing=!1}).catch(function(e){t.$snackbar.showError(e),t.refreshing=!1})},activeRealTime:function(){},disableRealTime:function(){window.Echo.leave(this.channel)}},created:function(){this.realTime&&this.activeRealTime()}},Pt={name:"ChangeLogComponent",components:{"changelog-list":Object(s.a)(Ft,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-toolbar",{attrs:{color:"secondary darken-3"}},[a("v-menu",{attrs:{bottom:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",dark:""},slot:"activator"},[a("v-icon",[t._v("more_vert")])],1),t._v(" "),a("v-list",[a("v-list-tile",{attrs:{href:"/jobs/sheet_holders",target:"_blank"}},[a("v-list-tile-title",[t._v("TODO 0 Estadístiques")])],1)],1)],1),t._v(" "),a("v-toolbar-title",{staticClass:"white--text title",domProps:{textContent:t._s(t.title)}}),t._v(" "),a("v-spacer"),t._v(" "),t.returnUrl?a("v-btn",{staticClass:"white--text",attrs:{icon:"",href:t.returnUrl,title:"Torna al mòdul"}},[a("v-icon",[t._v("arrow_back")])],1):t._e(),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{flat:""},on:{click:function(e){t.realTime=!t.realTime}}},[a("span",{staticClass:"mr-1"},[t._v("Temps real")]),t._v(" "),t.realTime?a("v-icon",[t._v("check_box")]):a("v-icon",[t._v("check_box_outline_blank")])],1),t._v(" "),a("fullscreen-dialog",{staticClass:"white--text",attrs:{flat:!1,icon:"settings",color:"blue darken-3",title:"Canviar la configuració del registre de canvis"},model:{value:t.settingsDialog,callback:function(e){t.settingsDialog=e},expression:"settingsDialog"}},[a("changelog-settings",{attrs:{module:"changelog"},on:{close:function(e){t.settingsDialog=!1}}})],1),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{id:"incidents_refresh_button",icon:"",loading:t.refreshing,disabled:t.refreshing},on:{click:t.refresh}},[a("v-icon",[t._v("refresh")])],1)],1),t._v(" "),a("v-card",[a("v-container",{attrs:{fluid:""}},[a("v-text-field",{staticClass:"mb-2",attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-timeline",{attrs:{dense:"",clipped:""}},[a("v-data-iterator",{attrs:{search:t.search,items:t.timeline,"rows-per-page-items":t.rowsPerPageItems,pagination:t.pagination,"no-results-text":"No s'ha trobat cap registre coincident","no-data-text":"No hi han dades disponibles","rows-per-page-text":"Registres per pàgina",row:"",wrap:""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item;return a("v-timeline-item",{key:i.id,staticClass:"mb-3",attrs:{color:i.color,icon:i.icon,small:""}},[a("v-layout",{attrs:{"justify-space-between":""}},[a("v-flex",{attrs:{xs2:"","text-xs-left":"","align-self-center":""}},[i.user_name?[a("span",{attrs:{title:i.user_email}},[t._v(t._s(i.user_name))])]:[t._v("Cap usuari")]],2),t._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-left":"","align-self-center":""}},[t.realTime?a("timeago",{attrs:{title:i.formatted_time,datetime:"object"==typeof i.time?i.time.date:i.time,"auto-update":1,converterOptions:{includeSeconds:!0}}}):a("span",{attrs:{title:i.formatted_time}},[t._v(t._s(i.human_time))])],1),t._v(" "),a("v-flex",{attrs:{xs4:"","text-xs-left":"","align-self-center":""},domProps:{innerHTML:t._s(i.text)}}),t._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-left":"","align-self-center":""}},[a("compare-values",{attrs:{name:"Compara",title:"Compara valor àntic i valor nou",log:i}})],1),t._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-left":"","align-self-center":""}},[a("json-dialog-component",{attrs:{name:"Actual",title:"Objecte actual",json:i.loggable}})],1),t._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-left":"","align-self-center":""}},[a("json-dialog-component",{attrs:{name:"Nou",title:"Objecte nou",json:JSON.parse(i.new_value)}})],1),t._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-left":"","align-self-center":""}},[a("json-dialog-component",{attrs:{name:"Àntic",title:"Objecte en el moment de la modificació",json:JSON.parse(i.old_value)}})],1),t._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-left":"","align-self-center":""}},[a("v-btn",{attrs:{icon:"",href:i.module.href,target:i.module.target}},[a("v-icon",{attrs:{title:"Mòdul "+i.module.text}},[t._v(t._s(i.module.icon))])],1)],1),t._v(" "),a("v-flex",{attrs:{xs1:"","text-xs-left":"","align-self-center":""}},[a("v-icon",{attrs:{title:"Acció: "+i.action.text}},[t._v(t._s(i.action.icon))])],1)],1)],1)}}])})],1)],1)],1)],1)},[],!1,null,null,null).exports},props:{logs:{type:Array,required:!0},users:{type:Array,required:!0},channel:{type:String,default:"App.Log"},title:{type:String,default:"Registre de canvis"},returnUrl:{type:String,default:null},refreshUrl:{type:String,default:"/api/v1/changelog"}}},Rt=Object(s.a)(Pt,function(){var t=this.$createElement;return(this._self._c||t)("changelog-list",{attrs:{"refresh-url":this.refreshUrl,"return-url":this.returnUrl,title:this.title,channel:this.channel,users:this.users,logs:this.logs}})},[],!1,null,null,null).exports,Mt=function(t,e){var a=e&&e.hidden,i=e&&e.disabled;return a?(t.firstElementChild.style.display="none",!0):i?(t.firstElementChild.disabled=!0,!0):void t.remove()},Lt=function(t){if(null==t)return!0;if(window.laravel_user&&window.laravel_user.admin)return!0;var e=window.laravel_user&&window.laravel_user.roles;return!!e&&-1!==e.indexOf(t)},It=function(t){return Lt(t)},Vt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=window.laravel_user;if(a&&a.admin)return!0;var i=a&&a.permissions;return e instanceof Object&&a.id===e.user_id||!!i&&-1!==i.indexOf(t)},Gt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!Vt(t,e)},Yt={install:function(t,e){t.directive("can",{bind:function(t,e,a,i){var s,n=e.arg,r=e.value;if(r instanceof Object)s=e.expression+"."+n;else{if(null===e.value)return!0;s=e.value||e.expression}Vt(s,r)||Mt(t,e.modifiers)}}),t.directive("role",{bind:function(t,e,a,i){if(null===e.value)return!0;var s=e.value||e.expression;Lt(s)||Mt(t,e.modifiers)}}),t.prototype.$can=Vt,t.prototype.$cannot=Gt,t.prototype.$haveRole=Lt,t.prototype.$hasRole=It}},zt={props:{buttonTrueText:{type:String,default:"Confirmar"},buttonFalseText:{type:String,default:"Cancel·lar"},buttonTrueColor:{type:String,default:"error"},buttonFalseColor:{type:String,default:"success"},color:{type:String,default:"warning"},icon:{type:String,default:"warning"},message:{type:String},title:{type:String},width:{type:Number,default:300}},data:function(){return{value:!1}},methods:{choose:function(t){this.$emit("result",t),this.value=t,this.$destroy()},change:function(t){this.$destroy()}}},Kt=Object(s.a)(zt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{value:"true","max-width":t.width},on:{input:t.change}},[t.title?a("v-toolbar",{attrs:{dark:"",color:t.color,dense:""}},[t.icon?a("v-icon",[t._v(t._s(t.icon))]):t._e(),t._v(" "),a("v-toolbar-title",{staticClass:"white--text",domProps:{textContent:t._s(t.title)}})],1):t._e(),t._v(" "),a("v-card",{attrs:{tile:""}},[a("v-card-text",{domProps:{innerHTML:t._s(t.message)}}),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.buttonFalseColor,flat:""},on:{click:function(e){return t.choose(!1)}}},[t._v(t._s(t.buttonFalseText))]),t._v(" "),a("v-btn",{attrs:{color:t.buttonTrueColor,flat:""},on:{click:function(e){return t.choose(!0)}}},[t._v(t._s(t.buttonTrueText))])],1)],1)],1)},[],!1,null,null,null).exports;function Wt(t,e){var a=e&&e.property||"$confirm";t.prototype[a]=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.message=e,function(e){return new Promise(function(a){var i=new t(Object.assign(Kt,{destroyed:function(t){document.body.removeChild(i.$el),a(i.value)}}));Object.assign(i,t.prototype.$confirm.options||{},e),document.body.appendChild(i.$mount().$el)})}(a)},t.prototype[a].options=e||{}}"undefined"!=typeof window&&window.Vue&&window.Vue.use(Wt);var Ht=Wt,Jt=new o.a,Xt={data:function(){return{message:"Prova",timeout:3e3,color:"success",show:!1}},methods:{showMessage:function(t){this.message=t,this.color="success",this.show=!0},showError:function(t){this.message=t,this.color="error",this.show=!0}},mounted:function(){var t=this;Jt.$on("showSnackbarError",function(e){t.showError(e)}),Jt.$on("showSnackbarMessage",function(e){t.showMessage(e)})}},Qt=Object(s.a)(Xt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{timeout:t.timeout,color:t.color},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v("\n    "+t._s(t.message)+"\n    "),a("v-btn",{attrs:{dark:"",flat:""},on:{click:function(e){t.show=!1}}},[t._v("Tancar")])],1)},[],!1,null,null,null).exports;function Zt(t,e){t.component("snackbar",Qt),t.prototype.$snackbar={showMessage:function(t){Jt.$emit("showSnackbarMessage",t)},showError:function(t){Jt.$emit("showSnackbarError",t)}}}"undefined"!=typeof window&&window.Vue&&window.Vue.use(Zt);var te=Zt,ee=a("hoI+"),ae=a("VYzq"),ie=a.n(ae),se={name:"ServiceWorker",methods:{registerServiceWorker:function(){var t=this;"serviceWorker"in navigator?"complete"===document.readyState?window.addEventListener("load",function(){t.register()}):this.register():console.log("Service workers aren't supported in this browser.")},register:function(){navigator.serviceWorker.register("/sw.js").then(function(t){console.log("Registration successful, scope is:",t.scope),navigator.serviceWorker.ready.then(function(t){return t.pushManager.subscribe({userVisibleOnly:!0})})})}},created:function(){this.registerServiceWorker()}},ne=Object(s.a)(se,function(){var t=this.$createElement;return(this._self._c||t)("span")},[],!1,null,null,null).exports,re={name:"NotificationsWidget",data:function(){return{dataNotifications:[],loading:!1}},props:{notifications:{type:Array,required:!1}},computed:{large:function(){return!!this.dataNotifications&&this.dataNotifications.length>0},amount:function(){return this.dataNotifications?this.dataNotifications.length:0}},methods:{refresh:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,window.axios.get("/api/v1/user/unread_notifications/").then(function(a){t.dataNotifications=a.data,t.loading=!1,e&&t.$snackbar.showMessage("Notificacions actualitzades correctament")}).catch(function(e){t.loading=!1,t.$snackbar.showError(e)})},markAsReaded:function(t){var e=this;this.loading=!0,window.axios.delete("/api/v1/user/unread_notifications/"+t.id).then(function(){e.loading=!1,e.refresh()}).catch(function(t){e.loading=!1,e.$snackbar(t)})},markAllAsReaded:function(){var t=this;this.loading=!0,this.loading=!0,window.axios.delete("/api/v1/user/unread_notifications/all").then(function(){t.loading=!1,t.refresh()}).catch(function(e){t.loading=!1,t.$snackbar(e)})}},created:function(){var t=this;this.notifications?this.dataNotifications=this.notifications:(this.loading=!0,window.axios.get("/api/v1/user/unread_notifications").then(function(e){t.dataNotifications=e.data,t.loading=!1}).catch(function(e){t.$snackbar.showError(e),t.loading=!1}))}},oe=Object(s.a)(re,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":""}},[a("v-badge",{staticClass:"ml-3 mr-2",attrs:{slot:"activator",left:"",overlap:"",color:"error"},slot:"activator"},[a("span",{attrs:{slot:"badge"},domProps:{textContent:t._s(t.amount)},slot:"badge"}),t._v(" "),a("v-btn",{attrs:{icon:"",color:"white",loading:t.loading,disabled:t.loading}},[a("v-icon",{attrs:{large:t.large,color:"primary"}},[t._v("notifications")])],1)],1),t._v(" "),a("v-list",[t.dataNotifications.length>0?a("v-list-tile",[a("v-list-tile-title",[1===t.dataNotifications.length?a("span",[t._v("\n                    Teniu "+t._s(t.dataNotifications.length)+" notificació pendent:\n                ")]):a("span",[t._v("\n                    Teniu "+t._s(t.dataNotifications.length)+" notificacións pendents:\n                ")])])],1):t._e(),t._v(" "),t.dataNotifications.length>0?a("v-divider"):t._e(),t._v(" "),t._l(t.dataNotifications,function(e,i){return t.dataNotifications.length>0?a("v-list-tile",{key:i,on:{click:function(a){return t.markAsReaded(e)}}},[a("v-list-tile-title",{staticStyle:{"max-width":"450px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(e.data.title))])],1):t._e()}),t._v(" "),0===t.dataNotifications.length?a("v-list-tile",[a("v-list-tile-title",[t._v("No hi ha cap notificació pendent de llegir")])],1):t._e(),t._v(" "),a("v-divider"),t._v(" "),a("v-list-tile",[a("v-list-tile-title",{staticClass:"caption"},[a("a",{attrs:{href:"/notifications"}},[t._v("Veure totes")]),t._v(" |\n                "),t.dataNotifications.length>0?a("span",[a("a",{attrs:{href:"#"},on:{click:t.markAllAsReaded}},[t._v("Marcar totes com a llegides")]),t._v(" |\n                ")]):t._e(),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(e){return t.refresh(!0)}}},[t._v("Actualitzar")])])],1)],2)],1)},[],!1,null,null,null).exports,le={name:"NotificationCard",data:function(){return{dataNotification:this.notification,closed:!1,minified:!1}},props:{notification:{type:Object,required:!0}}},ce={name:"UserNotificationsList",components:{"notification-card":Object(s.a)(le,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.closed?t._e():a("v-card",{staticClass:"elevation-3"},[a("v-toolbar",{staticClass:"elevation-0",attrs:{dense:"",color:"white"}},[a("v-spacer"),t._v(" "),a("v-toolbar-items",[a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){t.closed=!0,t.$emit("close")}}},[a("v-icon",{attrs:{color:"grey"}},[t._v("close")])],1),t._v(" "),t.minified?a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){t.minified=!1,t.$emit("maxified")}}},[a("v-icon",{attrs:{color:"grey"}},[t._v("add")])],1):a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){t.minified=!0,t.$emit("minified")}}},[a("v-icon",{attrs:{color:"grey"}},[t._v("remove")])],1)],1)],1),t._v(" "),t.minified?t._e():a("v-container",{attrs:{fluid:"","grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[t._v("\n                "+t._s(t.dataNotification.data.title)+"\n                "+t._s(t.dataNotification)+"\n            ")])],1)],1)],1)},[],!1,null,null,null).exports},data:function(){return{closed:!1,minified:!1}},props:{notifications:{type:Array,required:!0}}},de=Object(s.a)(ce,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.closed?t._e():a("span",[a("v-toolbar",{attrs:{color:"primary",dense:""}},[a("v-toolbar-title",{staticClass:"white--text"},[t._v("Notificacions rebudes")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",[a("v-btn",{staticClass:"white--text",attrs:{icon:""},nativeOn:{click:function(e){t.closed=!0,t.$emit("close")}}},[a("v-icon",[t._v("close")])],1),t._v(" "),t.minified?a("v-btn",{staticClass:"white--text",attrs:{icon:""},nativeOn:{click:function(e){t.minified=!1,t.$emit("maxified")}}},[a("v-icon",[t._v("add")])],1):a("v-btn",{staticClass:"white--text",attrs:{icon:""},nativeOn:{click:function(e){t.minified=!0,t.$emit("minified")}}},[a("v-icon",[t._v("remove")])],1)],1)],1),t._v(" "),t._l(t.notifications,function(e){return t.minified?t._e():[a("notification-card",{staticClass:"mb-1",attrs:{notification:e}})]})],2)},[],!1,null,null,null).exports,ue=a("vDqi"),ve=a.n(ue),fe={name:"UserAvatarComponent",components:{"confirm-icon":Tt},data:function(){return{uploading:!1,deleting:!1,path:""}},props:{editable:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},user:{type:Object,default:function(){return{}}},hashId:{required:!0},size:{type:String,default:"40"},alt:{required:!0},tile:{type:Boolean,default:!1}},methods:{photoChange:function(t){if(this.uploading=!0,0!==(t.target||t.srcElement).value.length){var e=new FormData;e.append("photo",this.$refs.file.files[0]),this.preview(),this.save(e)}},save:function(t){var e=this;ve.a.post("/api/v1/user/"+this.user.id+"/photo",t).then(function(t){e.uploading=!1,e.path=t.data,e.$emit("input",e.path)}).catch(function(t){e.uploading=!1,e.showError(t)})},preview:function(){var t=this;if(this.$refs.file.files&&this.$refs.file.files[0]){var e=new FileReader;e.onload=function(e){t.$refs.previewImage.setAttribute("src",e.target.result)},e.readAsDataURL(this.$refs.file.files[0])}},change:function(){this.editable&&this.$refs.file.click(),this.$emit("click")},remove:function(){var t=this;this.deleting=!0,ve.a.delete("/api/v1/user/"+this.user.id+"/photo").then(function(e){t.deleting=!1,t.path="",t.$emit("input",t.path),t.$refs.previewImage.setAttribute("src","img/default.png"),t.user.photo=null}).catch(function(e){t.deleting=!1,t.showError(e)})}}},pe=(a("Cxj3"),Object(s.a)(fe,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.hashId?a("v-avatar",{attrs:{color:"grey lighten-4",size:t.size,tile:t.tile},on:{click:t.change,dblclick:function(e){return t.$emit("dblclick")}}},[a("img",{ref:"previewImage",attrs:{src:"/user/"+t.hashId+"/photo",alt:t.alt,title:t.alt}}),t._v(" "),t.editable?a("form",{staticClass:"upload"},[a("input",{ref:"file",attrs:{type:"file",name:"photo",accept:"image/*",disabled:t.uploading},on:{change:t.photoChange}})]):t._e()]):t._e(),t._v(" "),t.removable&&t.user.photo?a("confirm-icon",{attrs:{icon:"delete",color:"pink",working:t.deleting,tooltip:"Eliminar foto",message:"Segur que voleu esborrar la foto de l'usuari?"},on:{confirmed:function(e){return t.remove()}}}):t._e()],1)},[],!1,null,"5f697bce",null).exports),me={components:{"user-avatar":pe},data:function(){return{internalUser:this.user}},model:{prop:"user",event:"input"},props:{chips:{type:Boolean,default:!0},name:{type:String,default:"user"},user:{},label:{type:String,default:"Escolliu un usuari"},users:{type:Array,required:!0},itemValue:{type:String,default:"id"},errorMessages:{type:Array,required:!1}},watch:{user:function(t){this.internalUser=t}},methods:{input:function(){this.$emit("input",this.internalUser)},blur:function(){this.$emit("blur",this.internalUser)}}},he=Object(s.a)(me,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-autocomplete",{attrs:{name:t.name,label:t.label,items:t.users,"item-text":"full_search","item-value":t.itemValue,chips:t.chips,clearable:"","error-messages":t.errorMessages},on:{input:t.input,blur:t.blur},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{key:JSON.stringify(e.item),staticClass:"chip--select-multi",attrs:{selected:e.selected},on:{input:function(t){return e.parent.selectItem(e.item)}}},[a("user-avatar",{attrs:{"hash-id":e.item.hashid,alt:e.item.name}}),t._v("\n            "+t._s(e.item.name)+"\n        ")],1)]}},{key:"item",fn:function(e){var i=e.item;return[i?a("v-list-tile-avatar",[a("img",{attrs:{src:"/user/"+i.hashid+"/photo"}})]):t._e(),t._v(" "),i?a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(i.name)}}),t._v(" "),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(i.email)}})],1):t._e()]}}]),model:{value:t.internalUser,callback:function(e){t.internalUser=e},expression:"internalUser"}})},[],!1,null,null,null).exports,ge={name:"SimpleNotificationForm",components:{"user-select":he},mixins:[g.validationMixin],validations:{title:{required:_.required,maxLength:Object(_.maxLength)(140)},user:{required:_.required}},data:function(){return{title:"",sending:!1,user:null}},props:{users:{type:Array,required:!0}},computed:{titleErrors:function(){var t=[];return this.$v.title.$dirty?(!this.$v.title.required&&t.push("El títol és obligatori."),t):t},userErrors:function(){var t=[];return this.$v.user.$dirty?(!this.$v.user.required&&t.push("L'usuari és obligatori."),t):t}},methods:{send:function(){var t=this;this.sending=!0,window.axios.post("/api/v1/simple_notifications",{user:this.user,title:this.title}).then(function(){t.sending=!1,t.$snackbar.showMessage("Notificació enviada correctament"),t.$emit("sent")}).catch(function(e){t.sending=!1,t.$snackbar.showError(e)})}}},_e={name:"SimpleNotificationSendCard",components:{"simple-notification-send-form":Object(s.a)(ge,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"form"},[a("v-text-field",{attrs:{counter:140,label:"Text curt de la notificació",required:"","error-messages":t.titleErrors},on:{input:function(e){return t.$v.title.$touch()},blur:function(e){return t.$v.title.$touch()}},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),a("user-select",{attrs:{label:"A qui voleu enviar la notificació?",users:t.users,"error-messages":t.userErrors},on:{input:function(e){return t.$v.user.$touch()},blur:function(e){return t.$v.user.$touch()}},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:"",loading:t.sending,disabled:t.sending||t.$v.$invalid},on:{click:function(e){return t.send()}}},[a("v-icon",{staticClass:"mr-2"},[t._v("email")]),t._v("Enviar")],1)],1)},[],!1,null,null,null).exports},data:function(){return{closed:!1,minified:!1}},props:{users:{type:Array,required:!0}}},be=Object(s.a)(_e,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.closed?t._e():a("v-card",{staticClass:"elevation-3"},[a("v-toolbar",{attrs:{color:"primary",dense:""}},[a("v-toolbar-title",{staticClass:"white--text"},[t._v("Enviar una notificació ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-items",[a("v-btn",{staticClass:"white--text",attrs:{icon:""},nativeOn:{click:function(e){t.closed=!0,t.$emit("close")}}},[a("v-icon",[t._v("close")])],1),t._v(" "),t.minified?a("v-btn",{staticClass:"white--text",attrs:{icon:""},nativeOn:{click:function(e){t.minified=!1,t.$emit("maxified")}}},[a("v-icon",[t._v("add")])],1):a("v-btn",{staticClass:"white--text",attrs:{icon:""},nativeOn:{click:function(e){t.minified=!0,t.$emit("minified")}}},[a("v-icon",[t._v("remove")])],1)],1)],1),t._v(" "),t.minified?t._e():a("v-container",{attrs:{fluid:"","grid-list-xs":""}},[a("simple-notification-send-form",{attrs:{users:t.users},on:{sent:function(e){return t.$emit("sent")}}})],1)],1)},[],!1,null,null,null).exports;function ke(t,e,a,i,s,n,r){try{var o=t[n](r),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(i,s)}var xe={name:"NotificationsDeleteMultiple",data:function(){return{loading:!1}},props:{notifications:{type:Array,required:!0}},methods:{remove:function(){var t,e=(t=E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Esteu segurs que voleu eliminar aquestes notificacions?",{title:"Esteu segurs?",buttonTrueText:"Eliminar"});case 2:t.sent&&this.removeNotifications();case 4:case"end":return t.stop()}},t,this)}),function(){var e=this,a=arguments;return new Promise(function(i,s){var n=t.apply(e,a);function r(t){ke(n,i,s,r,o,"next",t)}function o(t){ke(n,i,s,r,o,"throw",t)}r(void 0)})});return function(){return e.apply(this,arguments)}}(),removeNotifications:function(){var t=this;this.loading=!0,window.axios.post("/api/v1/notifications/multiple",{notifications:this.notifications.map(function(t){return t.id})}).then(function(e){t.$snackbar.showMessage("S'han esborrat correctament "+e.data+" notificacions"),t.$emit("deleted",e.data),t.loading=!1}).catch(function(e){t.$snackbar.showError(e),t.loading=!1})}}},we=Object(s.a)(xe,function(){var t=this.$createElement,e=this._self._c||t;return e("v-btn",{attrs:{color:"error",loading:this.loading,disabled:this.loading},on:{click:this.remove}},[e("v-icon",[this._v("delete")]),this._v(" Eliminar\n")],1)},[],!1,null,null,null).exports,ye={name:"NotificationsFilterByType",data:function(){return{dataTypes:this.types,dataType:this.type}},model:{prop:"type",event:"input"},props:{types:{type:Array,required:!0},type:{}},watch:{type:function(t){this.dataType=t}},methods:{input:function(){this.$emit("input",this.dataType)},blur:function(){this.$emit("blur",this.dataType)}}},Ce=Object(s.a)(ye,function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-autocomplete",{attrs:{name:"notificationTypes",label:"Filtrar per tipus de notificació",items:t.dataTypes,clearable:"",chips:""},on:{input:t.input,blur:t.blur},model:{value:t.dataType,callback:function(e){t.dataType=e},expression:"dataType"}})},[],!1,null,null,null).exports,Te={name:"NotificationsFilterByNotifiableType",data:function(){return{dataTypes:this.types,dataType:this.type}},model:{prop:"type",event:"input"},props:{types:{type:Array,required:!0},type:{}},watch:{type:function(t){this.dataType=t}},methods:{input:function(){this.$emit("input",this.dataType)},blur:function(){this.$emit("blur",this.dataType)}}},Ee=Object(s.a)(Te,function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-autocomplete",{attrs:{name:"notificationNotifiableTypes",label:"Filtrar per tipus de notificat",items:t.dataTypes,clearable:"",chips:""},on:{input:t.input,blur:t.blur},model:{value:t.dataType,callback:function(e){t.dataType=e},expression:"dataType"}})},[],!1,null,null,null).exports,$e={name:"NotificationsFilterByNotifiable",components:{"user-select":he},data:function(){return{dataNotifiables:this.notifiables,dataNotifiable:this.notifiable}},model:{prop:"notifiable",event:"input"},props:{notifiables:{notifiable:Array,required:!0},notifiable:{}},watch:{notifiable:function(t){this.dataNotifiable=t}},methods:{input:function(){this.$emit("input",this.dataNotifiable)},blur:function(){this.$emit("blur",this.dataNotifiable)}}},Se=Object(s.a)($e,function(){var t=this,e=t.$createElement;return(t._self._c||e)("user-select",{attrs:{name:"notifiable",label:"Filtrar per usuari notificat",users:t.dataNotifiables},on:{input:t.input,blur:t.blur},model:{value:t.dataNotifiable,callback:function(e){t.dataNotifiable=e},expression:"dataNotifiable"}})},[],!1,null,null,null).exports,Oe={name:"NotificationFilters",data:function(){return{dataSelectedFilters:this.selectedFilters}},model:{prop:"selectedFilters",event:"input"},props:{selectedFilters:{},filters:{type:Array,required:!0}},watch:{selectedFilters:function(t){this.dataSelectedFilters=t}},methods:{input:function(){this.$emit("input",this.dataSelectedFilters)},blur:function(){this.$emit("blur",this.dataSelectedFilters)}}},Ne=Object(s.a)(Oe,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-autocomplete",{attrs:{items:t.filters,attach:"",label:"Altres filtres",multiple:"","return-object":"","item-text":"name",chips:""},on:{input:t.input,blur:t.blur},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v(t._s(e.item.name)+", ")]}},{key:"item",fn:function(e){return[a("v-checkbox",{model:{value:e.tile.props.value,callback:function(a){t.$set(e.tile.props,"value",a)},expression:"data.tile.props.value"}}),t._v("\n        "+t._s(e.item.name)+"\n    ")]}}]),model:{value:t.dataSelectedFilters,callback:function(e){t.dataSelectedFilters=e},expression:"dataSelectedFilters"}})},[],!1,null,null,null).exports;function Ae(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var je=[{id:1,name:"Llegides",function:"readNotifications"},{id:2,name:"Pendents de llegir",function:"unreadNotifications"}],qe={all:function(t){return t},byType:function(t,e){return t?t.filter(function(t){return t.type===e}):[]},byNotifiableType:function(t,e){return t?t.filter(function(t){return t.notifiable_type===e}):[]},byNotifiable:function(t,e){return t?t.filter(function(t){return t.notifiable.id===e}):[]},readNotifications:function(t,e){return t?t.filter(function(t){return null!==t.read_at}):[]},unreadNotifications:function(t,e){return t?t.filter(function(t){return null===t.read_at}):[]}},De={name:"NotificationsList",components:{"notifications-delete-multiple":we,"user-avatar":pe,"json-dialog-component":Bt,"notifications-filter-by-type":Ce,"notifications-filter-by-notifiable-type":Ee,"notifications-filter-by-notifiable":Se,"notifications-filters":Ne},data:function(){return{selected:[],selectedType:null,selectedNotifiableType:null,selectedNotifiable:null,selectedFilters:[],search:"",internalNotifications:this.notifications,refreshing:!1,headers:[{text:"Uuid",align:"left",value:"id"},{text:"Type",value:"type"},{text:"Notificat a",value:"notifiable_id"},{text:"Tipus Notificat",value:"notifiable_type"},{text:"Dades",value:"data"},{text:"Llegida",value:"read_at_timestamp"},{text:"Data creació",value:"created_at_timestamp"},{text:"Data actualització",value:"updated_at_timestamp"}]}},props:{notifications:{type:Array,required:!0},forceRefresh:{}},watch:{forceRefresh:function(t){t&&(this.refresh(),this.$emit("refreshed"))}},computed:{filteredNotifications:function(){var t=this,e=this.internalNotifications;return this.selectedType&&(e=qe.byType(this.internalNotifications,this.selectedType)),this.selectedNotifiableType&&(e=qe.byNotifiableType(this.internalNotifications,this.selectedNotifiableType)),this.selectedNotifiable&&(e=qe.byNotifiable(this.internalNotifications,this.selectedNotifiable)),this.selectedFilters.length>0&&this.selectedFilters.forEach(function(a){e=qe[a.function](t.internalNotifications)}),e},notificationTypes:function(){var t=this.internalNotifications?this.internalNotifications.map(function(t){return t.type}):[];return Ae(new Set(t))},notificationNotifiableTypes:function(){var t=this.internalNotifications?this.internalNotifications.map(function(t){return t.notifiable_type}):[];return Ae(new Set(t))},notificationNotifiables:function(){var t=this.internalNotifications?this.internalNotifications.map(function(t){if("App\\Models\\User"===t.notifiable_type)return t.notifiable}):[];return t=t.filter(function(t){return void 0!==t}),this.removeDuplicates(t,"id")}},methods:{removeDuplicates:function(t,e){return t.filter(function(t,a,i){return i.map(function(t){return t[e]}).indexOf(t[e])===a})},formatBoolean:function(t){return t?"Sí":"No"},refresh:function(){var t=this;this.refreshing=!0,window.axios.get("/api/v1/notifications").then(function(e){t.refreshing=!1,t.internalNotifications=e.data,t.$snackbar.showMessage("Notificacions actualitzades correctament")}).catch(function(e){t.refreshing=!1,t.$snackbar.showError(e)})},settings:function(){console.log("settings TODO")}},created:function(){this.filterNames=je}},Be={name:"Notifications",data:function(){return{forceRefresh:!1}},components:{"user-notifications-list":de,"simple-notification-send-card":be,"notifications-list":Object(s.a)(De,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{color:"primary",dense:""}},[a("v-menu",{attrs:{bottom:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",dark:""},slot:"activator"},[a("v-icon",[t._v("more_vert")])],1),t._v(" "),a("v-list",[a("v-list-tile",{attrs:{href:"/changelog/module/notifications",target:"_blank"}},[a("v-list-tile-title",[t._v("Mostrar historial de notificacions (registre de canvis)")])],1),t._v(" "),a("v-list-tile",{attrs:{href:"/users",target:"_blank"}},[a("v-list-tile-title",[t._v("Gestionar usuaris")])],1)],1)],1),t._v(" "),a("v-toolbar-title",{staticClass:"white--text"},[t._v("Notificacions")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-tooltip",{attrs:{bottom:""}},[a("v-btn",{staticClass:"white--text",attrs:{slot:"activator",id:"notifications_help_button",icon:"",href:"http://docs.scool.cat/docs/users",target:"_blank"},slot:"activator"},[a("v-icon",[t._v("help")])],1),t._v(" "),a("span",[t._v("Ajuda")])],1),t._v(" "),a("v-tooltip",{attrs:{bottom:""}},[a("v-btn",{staticClass:"white--text",attrs:{slot:"activator",icon:""},on:{click:t.settings},slot:"activator"},[a("v-icon",[t._v("settings")])],1),t._v(" "),a("span",[t._v("Configuració")])],1),t._v(" "),a("v-tooltip",{attrs:{bottom:""}},[a("v-btn",{staticClass:"white--text",attrs:{slot:"activator",id:"users_refresh_button",icon:"",loading:t.refreshing,disabled:t.refreshing},on:{click:t.refresh},slot:"activator"},[a("v-icon",[t._v("refresh")])],1),t._v(" "),a("span",[t._v("Actualitzar")])],1)],1),t._v(" "),a("v-card-title",[a("v-layout",[a("v-flex",{staticStyle:{"align-self":"flex-end"},attrs:{xs9:""}},[a("v-layout",[a("v-flex",{staticClass:"text-sm-left",staticStyle:{"align-self":"center"},attrs:{xs3:""}},[a("notifications-filter-by-type",{attrs:{types:t.notificationTypes},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}})],1),t._v(" "),a("v-flex",{attrs:{xs9:""}},[a("v-layout",[a("v-flex",{attrs:{xs3:""}},[a("notifications-filter-by-notifiable-type",{attrs:{types:t.notificationNotifiableTypes},model:{value:t.selectedNotifiableType,callback:function(e){t.selectedNotifiableType=e},expression:"selectedNotifiableType"}})],1),t._v(" "),a("v-flex",{attrs:{xs4:""}},[a("notifications-filter-by-notifiable",{attrs:{notifiables:t.notificationNotifiables},model:{value:t.selectedNotifiable,callback:function(e){t.selectedNotifiable=e},expression:"selectedNotifiable"}})],1),t._v(" "),a("v-flex",{attrs:{xs5:""}},[a("notifications-filters",{attrs:{filters:t.filterNames},model:{value:t.selectedFilters,callback:function(e){t.selectedFilters=e},expression:"selectedFilters"}})],1)],1)],1)],1)],1),t._v(" "),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t._v(" "),t.selected.length>0?a("div",{staticStyle:{"text-align":"left"},attrs:{id:"massive_actions"}},[a("notifications-delete-multiple",{attrs:{notifications:t.selected},on:{deleted:function(e){t.selected=[],t.refresh(!1)}}})],1):t._e(),t._v(" "),a("v-data-table",{staticClass:"px-0 mb-5 hidden-sm-and-down",attrs:{"select-all":"",headers:t.headers,items:t.filteredNotifications,search:t.search,"item-key":"id","disable-initial-sort":"","no-results-text":"No s'ha trobat cap registre coincident","no-data-text":"No hi han dades disponibles","rows-per-page-text":"Notificacions per pàgina","rows-per-page-items":[5,10,25,50,100,200,500,1e3,{text:"Tots",value:-1}]},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),t._v(" "),a("td",{staticClass:"text-xs-left cell"},[t._v("\n                    "+t._s(e.item.id)+"\n                ")]),t._v(" "),a("td",{staticClass:"text-xs-left cell"},[t._v("\n                    "+t._s(e.item.type)+"\n                ")]),t._v(" "),a("td",{staticClass:"text-xs-left cell"},["App\\Models\\User"===e.item.notifiable_type?a("span",[a("user-avatar",{attrs:{"hash-id":e.item.user_hashid,alt:e.item.user_name,user:e.item.notifiable}})],1):t._e(),t._v(" "),a("json-dialog-component",{attrs:{"btn-class":"ma-0",icon:"visibility",name:"data",title:"Veure les dades completes",json:e.item.notifiable}})],1),t._v(" "),a("td",{staticClass:"text-xs-left cell",staticStyle:{"max-width":"150px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v("\n                    "+t._s(e.item.notifiable_type)+"\n                ")]),t._v(" "),a("td",{staticClass:"text-xs-left cell",staticStyle:{"max-width":"175px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[a("json-dialog-component",{attrs:{"btn-class":"ma-0",icon:"visibility",name:"data",title:"Veure les dades completes",json:e.item.data}}),t._v(" "),"App\\Notifications\\SimpleNotification"===e.item.type?a("span",[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.item.data.title))]),t._v(" "),a("span",[t._v(t._s(e.item.data.title))])])],1):t._e()],1),t._v(" "),a("td",{staticClass:"text-xs-left cell",staticStyle:{"max-width":"125px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(t.formatBoolean(e.item.read_at)))]),t._v(" "),e.item.read_at_formatted?a("span",[t._v(t._s(e.item.read_at_diff)+" | "+t._s(e.item.read_at_formatted))]):a("span",[t._v(t._s(t.formatBoolean(e.item.read_at)))])])],1),t._v(" "),a("td",{staticClass:"text-xs-left cell",attrs:{title:e.item.formatted_created_at}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.item.formatted_created_at_diff))]),t._v(" "),a("span",[t._v(t._s(e.item.formatted_created_at))])])],1),t._v(" "),a("td",{staticClass:"text-xs-left cell",attrs:{title:e.item.formatted_updated_at}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.item.formatted_updated_at_diff))]),t._v(" "),a("span",[t._v(t._s(e.item.formatted_updated_at))])])],1)])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},[],!1,null,null,null).exports},props:{notifications:{type:Array},userNotifications:{type:Array,required:!0},users:{type:Array}}},Ue=Object(s.a)(Be,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:"",fluid:""}},[a("v-flex",{attrs:{xs12:""}},[a("user-notifications-list",{attrs:{notifications:t.userNotifications}})],1),t._v(" "),t.users.length>0?a("v-flex",{attrs:{xs12:""}},[a("simple-notification-send-card",{attrs:{users:t.users},on:{sent:function(e){t.forceRefresh=!0}}})],1):t._e(),t._v(" "),t.notifications.length>0?a("v-flex",{attrs:{xs12:""}},[a("notifications-list",{attrs:{users:t.users,notifications:t.notifications,"force-refresh":t.forceRefresh},on:{refreshed:function(e){t.forceRefresh=!1}}})],1):t._e()],1)],1)},[],!1,null,null,null).exports,Fe={name:"FooterComponent",data:function(){return{}}},Pe=Object(s.a)(Fe,function(){var t=this.$createElement,e=this._self._c||t;return e("v-footer",{attrs:{height:"auto",color:"primary lighten-1"}},[e("v-layout",{attrs:{"justify-center":"",row:"",wrap:""}},[e("v-flex",{attrs:{primary:"","lighten-2":"","py-3":"","text-xs-center":"","white--text":"",xs12:""}},[this._v("\n            El pantano es de La Sénia, perque el pantano es troba a la pobla, que com tots sabem forma part de lo imperi senienc\n        ")])],1)],1)},[],!1,null,null,null).exports,Re={name:"ShareFab",data:function(){return{dataTitle:this.title,dataText:this.text,dataUrl:this.url}},props:{title:{type:String,default:"Tasques Joan Tíscar"},text:{type:String,default:"pos moltes mes tasques"},url:{type:String,default:"https://tasks.joantiscar.scool.cat"}},methods:{share:function(){navigator.share({title:this.dataTitle,text:this.dataText,url:this.dataUrl}).then(function(){return console.log("Successful share")}).catch(function(t){return console.log("Error sharing:",t)})}},computed:{show:function(){return"share"in navigator}}},Me=Object(s.a)(Re,function(){var t=this.$createElement,e=this._self._c||t;return this.show?e("v-btn",{attrs:{color:"accent",fab:"",fixed:"",bottom:"",right:"",dark:""},on:{click:this.share}},[e("v-icon",[this._v("share")])],1):this._e()},[],!1,null,null,null).exports;a("9Wh1"),window.Vue=o.a,window.Vuetify=c.a;window.localStorage.getItem("DRAWER_STATE_KEY"),window.localStorage.getItem("DRAWER_RIGHT_STATE_KEY"),window.localStorage.getItem("DARK_THEME_KEY");var Le=window.localStorage.getItem("PRIMARY_COLOR_KEY")||"#627D98",Ie=window.localStorage.getItem("SECONDARY_COLOR_KEY")||"#2BB0ED";window.Vue.use(ee.a,{locale:"ca",locales:{ca:a("Vwa+")}}),window.Vue.use(ie.a),window.Vue.use(window.Vuetify,{options:{customProperties:!0},theme:{primary:{base:Le,lighten1:"#829AB1",lighten2:"#9FB3C8",lighten3:"#BCCCDC",lighten4:"#D9E2EC",lighten5:"#F0F4F8",darken1:"#486581",darken2:"#334E68",darken3:"#243B53",darken4:"#102A43"},secondary:{base:Ie,lighten1:"#40C3F7",lighten2:"#5ED0FA",lighten3:"#81DEFD",lighten4:"#B3ECFF",lighten5:"#E3F8FF",darken1:"#1992D4",darken2:"#127FBF",darken3:"#0B69A3",darken4:"#035388"},accent:{base:"#DA127D",lighten1:"#E8368F",lighten2:"#F364A2",lighten3:"#FF8CBA",lighten4:"#FFB8D2",lighten5:"#FFE3EC",darken1:"#BC0A6F",darken2:"#A30664",darken3:"#870557",darken4:"#620042"},error:{base:"#E12D39",lighten1:"#EF4E4E",lighten2:"#F86A6A",lighten3:"#FF9B9B",lighten4:"#FFBDBD",lighten5:"#FFE3E3",darken1:"#CF1124",darken2:"#AB091E",darken3:"#8A041A",darken4:"#610316"},success:{base:"#27AB83",lighten1:"#3EBD93",lighten2:"#65D6AD",lighten3:"#8EEDC7",lighten4:"#C6F7E2",lighten5:"#EFFCF6",darken1:"#199473",darken2:"#147D64",darken3:"#0C6B58",darken4:"#014D40"},grey:{base:"#627D98",lighten1:"#829AB1",lighten2:"#9FB3C8",lighten3:"#BCCCDC",lighten4:"#D9E2EC",lighten5:"#F0F4F8",darken1:"#486581",darken2:"#334E68",darken3:"#243B53",darken4:"#102A43"}}}),window.Vue.use(Ht),window.Vue.use(Yt),window.Vue.use(te),window.Vue.component("example-component",u),window.Vue.component("tasks",h),window.Vue.component("tags",st),window.Vue.component("tasques",Z),window.Vue.component("show-task",et),window.Vue.component("login-form",rt),window.Vue.component("register-form",lt),window.Vue.component("user-list",dt),window.Vue.component("impersonate",pt),window.Vue.component("user-select",vt),window.Vue.component("git-info",kt),window.Vue.component("task-completed-toggle",N),window.Vue.component("tema",_t),window.Vue.component("profile",Ot),window.Vue.component("changelog",Rt),window.Vue.component("sidebar-menu",At),window.Vue.component("service-worker",ne),window.Vue.component("NotificationsWidget",oe),window.Vue.component("Notifications",Ue),window.Vue.component("FooterComponent",Pe),window.Vue.component("share-fav",Me);new window.Vue(n)},eGYZ:function(t,e,a){var i=a("KfxI");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},fhPQ:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.v-offset {\n    margin: 0 auto;\n    max-width: calc(100% - 32px);\n    position: relative;\n}\n.v-offset--full-width {\n    max-width: 100%;\n}\n",""])},iwmN:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.upload > input[data-v-5f697bce]\n{\n    display: none;\n}\n",""])},k7iC:function(t,e,a){var i=a("o09p");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},kll2:function(t,e,a){"use strict";var i=a("sX8T");a.n(i).a},o09p:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.upload > input[data-v-60458d36]\n{\n    display: none;\n}\n",""])},pyCd:function(t,e){},sX8T:function(t,e,a){var i=a("fhPQ");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},uFlD:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.strike {\n    text-decoration: line-through;\n}\n\n",""])}},[[0,1,2]]]);